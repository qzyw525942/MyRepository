<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882"
xmlns:m="http://schemas.microsoft.com/office/2004/12/omml"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 12">
<meta name=Originator content="Microsoft Word 12">
<link rel=File-List href="day11.files/filelist.xml">
<link rel=Edit-Time-Data href="day11.files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>WangCongwei</o:Author>
  <o:LastAuthor>Windows 使用者</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>16</o:TotalTime>
  <o:Created>2017-07-11T02:36:00Z</o:Created>
  <o:LastSaved>2017-07-11T02:36:00Z</o:LastSaved>
  <o:Pages>32</o:Pages>
  <o:Words>3677</o:Words>
  <o:Characters>20959</o:Characters>
  <o:Lines>174</o:Lines>
  <o:Paragraphs>49</o:Paragraphs>
  <o:CharactersWithSpaces>24587</o:CharactersWithSpaces>
  <o:Version>12.00</o:Version>
 </o:DocumentProperties>
 <o:CustomDocumentProperties>
  <o:KSOProductBuildVer dt:dt="string">2052-10.1.0.5554</o:KSOProductBuildVer>
 </o:CustomDocumentProperties>
</xml><![endif]-->
<link rel=dataStoreItem href="day11.files/item0001.xml"
target="day11.files/props0002.xml">
<link rel=themeData href="day11.files/themedata.thmx">
<link rel=colorSchemeMapping href="day11.files/colorschememapping.xml">
<!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:TrackMoves>false</w:TrackMoves>
  <w:TrackFormatting/>
  <w:PunctuationKerning/>
  <w:DrawingGridVerticalSpacing>7.8 pt</w:DrawingGridVerticalSpacing>
  <w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery>
  <w:DisplayVerticalDrawingGridEvery>2</w:DisplayVerticalDrawingGridEvery>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotPromoteQF/>
  <w:LidThemeOther>EN-US</w:LidThemeOther>
  <w:LidThemeAsian>ZH-TW</w:LidThemeAsian>
  <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>
  <w:Compatibility>
   <w:SpaceForUL/>
   <w:BalanceSingleByteDoubleByteWidth/>
   <w:DoNotLeaveBackslashAlone/>
   <w:ULTrailSpace/>
   <w:DoNotExpandShiftReturn/>
   <w:AdjustLineHeightInTable/>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:DontUseIndentAsNumberingTabStop/>
   <w:FELineBreak11/>
   <w:WW11IndentRules/>
   <w:DontAutofitConstrainedTables/>
   <w:AutofitLikeWW11/>
   <w:HangulWidthLikeWW11/>
   <w:UseNormalStyleForList/>
   <w:UseFELayout/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
  <m:mathPr>
   <m:mathFont m:val="Cambria Math"/>
   <m:brkBin m:val="before"/>
   <m:brkBinSub m:val="&#45;-"/>
   <m:smallFrac m:val="off"/>
   <m:dispDef/>
   <m:lMargin m:val="0"/>
   <m:rMargin m:val="0"/>
   <m:defJc m:val="centerGroup"/>
   <m:wrapIndent m:val="1440"/>
   <m:intLim m:val="subSup"/>
   <m:naryLim m:val="undOvr"/>
  </m:mathPr></w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="false"
  DefSemiHidden="false" DefQFormat="false" LatentStyleCount="267">
  <w:LsdException Locked="false" QFormat="true" Name="Normal"/>
  <w:LsdException Locked="false" QFormat="true" Name="heading 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 6"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 7"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 8"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 9"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="caption"/>
  <w:LsdException Locked="false" QFormat="true" Name="Title"/>
  <w:LsdException Locked="false" SemiHidden="true" Name="Default Paragraph Font"/>
  <w:LsdException Locked="false" QFormat="true" Name="Subtitle"/>
  <w:LsdException Locked="false" Priority="99" Name="Hyperlink"/>
  <w:LsdException Locked="false" QFormat="true" Name="Strong"/>
  <w:LsdException Locked="false" QFormat="true" Name="Emphasis"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true"
   UnhideWhenUsed="true" Name="HTML Top of Form"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true"
   UnhideWhenUsed="true" Name="HTML Bottom of Form"/>
  <w:LsdException Locked="false" SemiHidden="true" Name="Normal Table"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true"
   UnhideWhenUsed="true" Name="No List"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true"
   UnhideWhenUsed="true" Name="Outline List 1"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true"
   UnhideWhenUsed="true" Name="Outline List 2"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true"
   UnhideWhenUsed="true" Name="Outline List 3"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true"
   UnhideWhenUsed="true" Name="Placeholder Text"/>
  <w:LsdException Locked="false" Priority="99" QFormat="true" Name="No Spacing"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 1"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true"
   UnhideWhenUsed="true" Name="Revision"/>
  <w:LsdException Locked="false" Priority="99" QFormat="true"
   Name="List Paragraph"/>
  <w:LsdException Locked="false" Priority="99" QFormat="true" Name="Quote"/>
  <w:LsdException Locked="false" Priority="99" QFormat="true"
   Name="Intense Quote"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 1"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 1"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 2"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 2"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 2"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 3"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 3"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 3"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 4"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 4"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 4"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 5"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 5"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 5"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 6"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 6"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 6"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="19" QFormat="true"
   Name="Subtle Emphasis"/>
  <w:LsdException Locked="false" Priority="21" QFormat="true"
   Name="Intense Emphasis"/>
  <w:LsdException Locked="false" Priority="31" QFormat="true"
   Name="Subtle Reference"/>
  <w:LsdException Locked="false" Priority="32" QFormat="true"
   Name="Intense Reference"/>
  <w:LsdException Locked="false" Priority="33" QFormat="true" Name="Book Title"/>
  <w:LsdException Locked="false" Priority="37" SemiHidden="true"
   UnhideWhenUsed="true" Name="Bibliography"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="TOC Heading"/>
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-alt:宋体;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 680460288 22 0 262145 0;}
@font-face
	{font-family:新細明體;
	panose-1:2 2 5 0 0 0 0 0 0 0;
	mso-font-alt:PMingLiU;
	mso-font-charset:136;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-1610611969 684719354 22 0 1048577 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-536870145 1107305727 0 0 415 0;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-536870145 1073743103 0 0 415 0;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:-520092929 1073786111 9 0 415 0;}
@font-face
	{font-family:等线;
	mso-font-alt:"Arial Unicode MS";
	mso-font-charset:122;
	mso-generic-font-family:auto;
	mso-font-pitch:auto;
	mso-font-signature:0 953122042 22 0 262159 0;}
@font-face
	{font-family:"\@新細明體";
	panose-1:2 2 5 0 0 0 0 0 0 0;
	mso-font-charset:136;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-1610611969 684719354 22 0 1048577 0;}
@font-face
	{font-family:"\@SimSun";
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 680460288 22 0 262145 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	font-size:10.5pt;
	mso-bidi-font-size:12.0pt;
	font-family:"Calibri","sans-serif";
	mso-fareast-font-family:SimSun;
	mso-bidi-font-family:"Times New Roman";
	mso-font-kerning:1.0pt;
	mso-fareast-language:ZH-CN;}
h1
	{mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-link:"標題 1 字元";
	mso-style-next:內文;
	margin-top:9.0pt;
	margin-right:0cm;
	margin-bottom:9.0pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:300%;
	mso-pagination:none;
	page-break-after:avoid;
	mso-outline-level:1;
	font-size:26.0pt;
	font-family:"Cambria","serif";
	mso-fareast-font-family:新細明體;
	mso-font-kerning:26.0pt;
	mso-fareast-language:ZH-CN;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{mso-style-update:auto;
	mso-style-priority:39;
	mso-style-unhide:no;
	mso-style-next:內文;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	font-size:10.5pt;
	mso-bidi-font-size:12.0pt;
	font-family:"Calibri","sans-serif";
	mso-fareast-font-family:SimSun;
	mso-bidi-font-family:"Times New Roman";
	mso-font-kerning:1.0pt;
	mso-fareast-language:ZH-CN;}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-unhide:no;
	mso-style-link:"頁首 字元";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	tab-stops:center 207.65pt right 415.3pt;
	layout-grid-mode:char;
	font-size:10.0pt;
	font-family:"Calibri","sans-serif";
	mso-fareast-font-family:SimSun;
	mso-bidi-font-family:"Times New Roman";
	mso-font-kerning:1.0pt;
	mso-fareast-language:ZH-CN;}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-unhide:no;
	mso-style-link:"頁尾 字元";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	tab-stops:center 207.65pt right 415.3pt;
	layout-grid-mode:char;
	font-size:10.0pt;
	font-family:"Calibri","sans-serif";
	mso-fareast-font-family:SimSun;
	mso-bidi-font-family:"Times New Roman";
	mso-font-kerning:1.0pt;
	mso-fareast-language:ZH-CN;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	mso-themecolor:hyperlink;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-unhide:no;
	color:purple;
	mso-themecolor:followedhyperlink;
	text-decoration:underline;
	text-underline:single;}
span.a
	{mso-style-name:"頁首 字元";
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:頁首;
	mso-font-kerning:1.0pt;
	mso-fareast-language:ZH-CN;}
span.a0
	{mso-style-name:"頁尾 字元";
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:頁尾;
	mso-font-kerning:1.0pt;
	mso-fareast-language:ZH-CN;}
span.1
	{mso-style-name:"標題 1 字元";
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"標題 1";
	mso-ansi-font-size:26.0pt;
	mso-bidi-font-size:26.0pt;
	font-family:"Cambria","serif";
	mso-ascii-font-family:Cambria;
	mso-fareast-font-family:新細明體;
	mso-hansi-font-family:Cambria;
	mso-font-kerning:26.0pt;
	mso-fareast-language:ZH-CN;
	font-weight:bold;}
.MsoChpDefault
	{mso-style-type:export-only;
	mso-default-props:yes;
	mso-ascii-font-family:Calibri;
	mso-fareast-font-family:SimSun;
	mso-hansi-font-family:Calibri;}
 /* Page Definitions */
 @page
	{mso-page-border-surround-header:no;
	mso-page-border-surround-footer:no;
	mso-footnote-separator:url("day11.files/header.htm") fs;
	mso-footnote-continuation-separator:url("day11.files/header.htm") fcs;
	mso-endnote-separator:url("day11.files/header.htm") es;
	mso-endnote-continuation-separator:url("day11.files/header.htm") ecs;}
@page WordSection1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;
	mso-header-margin:42.55pt;
	mso-footer-margin:49.6pt;
	mso-paper-source:0;
	layout-grid:15.6pt;}
div.WordSection1
	{page:WordSection1;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:表格內文;
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-unhide:no;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Calibri","sans-serif";
	mso-bidi-font-family:"Times New Roman";}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="3074"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body bgcolor=white lang=ZH-TW link=blue vlink=purple style='tab-interval:21.0pt;
text-justify-trim:punctuation'>

<div class=WordSection1 style='layout-grid:15.6pt'>

<p class=MsoNormal><span lang=EN-US style='font-size:20.0pt;mso-bidi-font-size:
24.0pt;font-family:等线;mso-bidi-font-family:等线'>day11<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoToc1 style='tab-stops:right dotted 414.8pt'><!--[if supportFields]><span
lang=EN-US><span style='mso-element:field-begin'></span><span
style='mso-spacerun:yes'> </span>TOC \o &quot;1-3&quot; \h \z \u <span
style='mso-element:field-separator'></span></span><![endif]--><span lang=EN-US><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc487532712"><span
lang=ZH-CN style='font-family:等线;mso-bidi-font-family:等线'>第一集 </span><span
style='font-family:等线;mso-bidi-font-family:等线'><span
style='mso-spacerun:yes'>  </span></span><span lang=ZH-CN style='font-family:
等线;mso-bidi-font-family:等线'>运行进程个数和剩余内存</span><span style='font-family:等线;
mso-bidi-font-family:等线'>/</span><span lang=ZH-CN style='font-family:等线;
mso-bidi-font-family:等线'>总内存的获取</span><span style='color:windowtext;display:
none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>... </span></span><!--[if supportFields]><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-element:field-begin'></span></span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'> PAGEREF _Toc487532712 \h </span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-separator'></span></span><![endif]--><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'>1</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003400380037003500330032003700310032000000</w:data>
</xml><![endif]--></span><!--[if supportFields]><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-end'></span></span><![endif]--></a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></span></p>

<p class=MsoToc1 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><span lang=EN-US style='mso-no-proof:yes'><a
href="#_Toc487532713"><span lang=ZH-CN style='font-family:等线;mso-bidi-font-family:
等线'>第二集</span><span style='font-family:等线;mso-bidi-font-family:等线'><span
style='mso-spacerun:yes'>   </span></span><span lang=ZH-CN style='font-family:
等线;mso-bidi-font-family:等线'>桌面清理小控件</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>... </span></span><!--[if supportFields]><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-element:field-begin'></span></span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'> PAGEREF _Toc487532713 \h </span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-separator'></span></span><![endif]--><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'>6</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003400380037003500330032003700310033000000</w:data>
</xml><![endif]--></span><!--[if supportFields]><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-end'></span></span><![endif]--></a></span></span><span
lang=EN-US style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc1 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><span lang=EN-US style='mso-no-proof:yes'><a
href="#_Toc487532714"><span lang=ZH-CN style='font-family:等线;mso-bidi-font-family:
等线'>第三集</span><span style='font-family:等线;mso-bidi-font-family:等线'><span
style='mso-spacerun:yes'>  </span><span style='mso-spacerun:yes'> </span></span><span
lang=ZH-CN style='font-family:等线;mso-bidi-font-family:等线'>锁屏清理进程</span><span
style='font-family:等线;mso-bidi-font-family:等线'>/</span><span lang=ZH-CN
style='font-family:等线;mso-bidi-font-family:等线'>解锁更新</span><span
style='font-family:等线;mso-bidi-font-family:等线'>Widget</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'> </span></span><!--[if supportFields]><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-element:field-begin'></span></span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'> PAGEREF _Toc487532714 \h </span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-separator'></span></span><![endif]--><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'>19</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003400380037003500330032003700310034000000</w:data>
</xml><![endif]--></span><!--[if supportFields]><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-end'></span></span><![endif]--></a></span></span><span
lang=EN-US style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc1 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><span lang=EN-US style='mso-no-proof:yes'><a
href="#_Toc487532715"><span lang=ZH-CN style='font-family:等线;mso-bidi-font-family:
等线'>第四集 </span><span style='font-family:等线;mso-bidi-font-family:等线'><span
style='mso-spacerun:yes'>  </span></span><span lang=ZH-CN style='font-family:
等线;mso-bidi-font-family:等线'>屏幕适配</span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>... </span></span><!--[if supportFields]><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-element:field-begin'></span></span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'> PAGEREF _Toc487532715 \h </span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-separator'></span></span><![endif]--><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'>21</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003400380037003500330032003700310035000000</w:data>
</xml><![endif]--></span><!--[if supportFields]><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-end'></span></span><![endif]--></a></span></span><span
lang=EN-US style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc1 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><span lang=EN-US style='mso-no-proof:yes'><a
href="#_Toc487532716"><span lang=ZH-CN style='font-family:等线;mso-bidi-font-family:
等线'>第五集</span><span style='font-family:等线;mso-bidi-font-family:等线'><span
style='mso-spacerun:yes'>  </span><span style='mso-spacerun:yes'> </span></span><span
lang=ZH-CN style='font-family:等线;mso-bidi-font-family:等线'>桌面快捷方式</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>... </span></span><!--[if supportFields]><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-element:field-begin'></span></span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'> PAGEREF _Toc487532716 \h </span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-separator'></span></span><![endif]--><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'>23</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003400380037003500330032003700310036000000</w:data>
</xml><![endif]--></span><!--[if supportFields]><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-end'></span></span><![endif]--></a></span></span><span
lang=EN-US style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc1 style='tab-stops:right dotted 414.8pt'><span
class=MsoHyperlink><span lang=EN-US style='mso-no-proof:yes'><a
href="#_Toc487532717"><span lang=ZH-CN style='font-family:等线;mso-bidi-font-family:
等线'>第六集</span><span style='font-family:等线;mso-bidi-font-family:等线'><span
style='mso-spacerun:yes'>  </span><span style='mso-spacerun:yes'> </span></span><span
lang=ZH-CN style='font-family:等线;mso-bidi-font-family:等线'>软件加锁解锁功能</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>... </span></span><!--[if supportFields]><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-element:field-begin'></span></span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'> PAGEREF _Toc487532717 \h </span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-separator'></span></span><![endif]--><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'>26</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003400380037003500330032003700310037000000</w:data>
</xml><![endif]--></span><!--[if supportFields]><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-end'></span></span><![endif]--></a></span></span><span
lang=EN-US style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoNormal><!--[if supportFields]><span lang=EN-US><span
style='mso-element:field-end'></span></span><![endif]--><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h1><a name="_Toc487532712"><span lang=ZH-CN style='font-size:14.0pt;
mso-bidi-font-size:18.0pt;line-height:300%;font-family:等线;mso-bidi-font-family:
等线;mso-font-kerning:1.0pt'>第一集 运行进程个数和剩余内存</span></a><span style='mso-bookmark:
_Toc487532712'><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:
18.0pt;line-height:300%;font-family:等线;mso-bidi-font-family:等线;mso-font-kerning:
1.0pt'>/</span></span><span style='mso-bookmark:_Toc487532712'><span
lang=ZH-CN style='font-size:14.0pt;mso-bidi-font-size:18.0pt;line-height:300%;
font-family:等线;mso-bidi-font-family:等线;mso-font-kerning:1.0pt'>总内存的获取</span></span><span
style='mso-bookmark:_Toc487532712'></span><span lang=EN-US style='font-size:
14.0pt;mso-bidi-font-size:18.0pt;line-height:300%;font-family:等线;mso-bidi-font-family:
等线;mso-font-kerning:1.0pt'><o:p></o:p></span></h1>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>在昨天的界面布局文件中增加如下红框中的两个</span><span
lang=EN-US>TextView</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>：</span></p>

<p class=MsoNormal><span lang=EN-US><!--[if gte vml 1]><v:shapetype id="_x0000_t75"
 coordsize="21600,21600" o:spt="75" o:preferrelative="t" path="m@4@5l@4@11@9@11@9@5xe"
 filled="f" stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="图片_x0020_2" o:spid="_x0000_i1025" type="#_x0000_t75"
 style='width:133.5pt;height:188.25pt;mso-position-horizontal-relative:page;
 mso-position-vertical-relative:page'>
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="day11.files/image001.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=178 height=251
src="day11.files/image002.jpg" v:shapes="图片_x0020_2"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>在</span><span lang=EN-US>TaskManagerActivity</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>的</span><span lang=EN-US>onCreate</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>中如下：</span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>。。。。。</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>tv_taskmanager_processes
= (TextView) findViewById(R.id.tv_taskmanager_processes);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>tv_taskmanager_freeandtotalram
= </span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>(TextView)
findViewById(R.id.tv_taskmanager_freeandtotalram);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取相应的数据，设置显示数据</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取运行的进程个数</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>processCount
= TaskUtil.getProcessCount(getApplicationContext());// TaskUtil</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>见后</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>tv_taskmanager_processes.setText(&quot;</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>运行中进程</span><span lang=EN-US>:\n&quot; + processCount + &quot;</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>个</span><span lang=EN-US>&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取剩余</span><span lang=EN-US>,</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>总内存</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>long
availableRam = TaskUtil.getAvailableRam(getApplicationContext());</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>数据转化</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>String
availaRam = Formatter.formatFileSize(getApplicationContext(), availableRam);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取总内存</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>根据不同的</span><span lang=EN-US>sdk</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>版去调用不同的方法</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
1.</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取当前的</span><span lang=EN-US>sdk</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>版本</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>int
sdk = android.os.Build.VERSION.SDK_INT;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>long
totalRam;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>if
(sdk &gt;= 16)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>totalRam
= TaskUtil.getTotalRam(getApplicationContext());</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}
else</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>totalRam
= TaskUtil.getTotalRam();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>数据转化</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>String
totRam = Formatter.formatFileSize(getApplicationContext(), totalRam);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>tv_taskmanager_freeandtotalram.setText(&quot;</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>剩余</span><span lang=EN-US>/</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>总内存</span><span
lang=EN-US>:\n&quot; + availaRam + &quot;/&quot; + <span style='mso-tab-count:
3'>                      </span>totRam);</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>。。。。。</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>TaskUtil</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>如下：</span></p>

<p class=MsoNormal><span lang=EN-US>public class TaskUtil</span></p>

<p class=MsoNormal><span lang=EN-US>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>获取正在运行的进程的个数</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
static int getProcessCount(Context context)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>ActivityManager
am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>List&lt;RunningAppProcessInfo&gt;
runningAppProcesses = am.getRunningAppProcesses();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>return
runningAppProcesses.size();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>获取剩余内存</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
static long getAvailableRam(Context context)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>ActivityManager
am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取内存的信息</span><span lang=EN-US>,</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>保存到</span><span lang=EN-US>memoryinfo</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>中</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>MemoryInfo
outInfo = new MemoryInfo();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>am.getMemoryInfo(outInfo);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取空闲的内存</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
outInfo.availMem;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
//</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取总的内存</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
outInfo.totalMem;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>return
outInfo.availMem;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>获取总的内存</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* @deprecated :</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>表示此方法过时</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
static long getTotalRam(Context context)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>ActivityManager
am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取内存的信息</span><span lang=EN-US>,</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>保存到</span><span lang=EN-US>memoryinfo</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>中</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>MemoryInfo
outInfo = new MemoryInfo();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>am.getMemoryInfo(outInfo);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取空闲的内存</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
outInfo.availMem;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
//</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取总的内存</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
outInfo.totalMem;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>return
outInfo.totalMem;// 16</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>版本之上才有</span><span
lang=EN-US>,</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>之下是没有的</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>程序运行前把清单文件中最小版本改为</span><span lang=EN-US>16</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>，保存，这里就不报错了；再改为</span><span lang=EN-US>8</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>，再保存，这里还是不会再报错</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>否则一致会报错</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>兼容低版本</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>与上方法名同，表示方法重载</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
static long getTotalRam()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>File
file = new File(&quot;/proc/meminfo&quot;);// </span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>模拟器的此文件中也存有总内存，剩于内存等信息</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>StringBuilder
sb = new StringBuilder();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>try</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>读取文件</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>BufferedReader
br = new BufferedReader(new FileReader(file));</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>String
readLine = br.readLine();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取内存数字</span><span lang=EN-US>:</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>此文件中信息如下：</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
MemTotal: 701716 kB</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
MemFree: 457720 kB</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>。。。。。</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>只需要获取第一行的数字即可，它就是总内存大小的数据</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>char[]
charArray = readLine.toCharArray();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>for
(char c : charArray)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>if
(c &gt;= '0' &amp;&amp; c &lt;= '9')</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>sb.append(c);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>String
string = sb.toString();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>转化成</span><span lang=EN-US>long</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>long
parseLong = Long.parseLong(string);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>return
parseLong * 1024;// </span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>获取到的是</span><span
lang=EN-US>kb</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>单位，所以转换为</span><span lang=EN-US>MB</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}
catch (FileNotFoundException e)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>e.printStackTrace();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}
catch (IOException e)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>e.printStackTrace();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>return
0;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>此外，当点击清理按钮的时候，应该更新上面红框中的两个</span><span
lang=EN-US>TextView</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>信息，所以在清理按钮的点击事件中如下：</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>。。。。</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>数据转化</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>String
deletesize = Formatter.formatFileSize(getApplicationContext(), memory);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>Toast.makeText(getApplicationContext(),
&quot;</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>共清理</span><span lang=EN-US>&quot; +
deleteTaskInfos.size() + &quot;</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>个进程</span><span
lang=EN-US>,<span style='mso-tab-count:2'>              </span></span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>释放</span><span lang=EN-US>&quot; + deletesize + &quot;</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>内存空间</span><span lang=EN-US>&quot;, 0)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>.show();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='color:blue'><span style='mso-tab-count:1'>         </span>// </span></span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri;color:blue'>更改运行中的进程个数以及剩余总内存</span><span lang=EN-US style='color:blue'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>processCount = processCount -
deleteTaskInfos.size(); //</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>原来运行的总个数减去删除</span><span
lang=EN-US style='color:blue'><span style='mso-tab-count:2'>               </span>//</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri;color:blue'>的个数</span><span lang=EN-US style='color:blue'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>tv_taskmanager_processes.setText(&quot;</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri;color:blue'>运行中进程</span><span lang=EN-US style='color:blue'>:\n&quot; +
processCount + &quot;</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>个</span><span
lang=EN-US style='color:blue'>&quot;);<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>// </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>更改剩余内存</span><span
lang=EN-US style='color:blue'>,</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>重新获取剩余内存</span><span
lang=EN-US style='color:blue'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>// </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>获取剩余内存</span><span
lang=EN-US style='color:blue'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>long availableRam =
TaskUtil.getAvailableRam(getApplicationContext());<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>// </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>数据转化</span><span
lang=EN-US style='color:blue'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>String availaRam =
Formatter.formatFileSize(getApplicationContext(), availableRam);<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'>// </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>获取总内存</span><span
lang=EN-US style='color:blue'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>// </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>根据不同的</span><span
lang=EN-US style='color:blue'>sdk</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>版去调用不同的方法</span><span
lang=EN-US style='color:blue'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>// 1.</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>获取当前的</span><span
lang=EN-US style='color:blue'>sdk</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>版本</span><span
lang=EN-US style='color:blue'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>int sdk = android.os.Build.VERSION.SDK_INT;<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>long totalRam;<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>if (sdk &gt;= 16)<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>{<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
3'>                            </span>totalRam =
TaskUtil.getTotalRam(getApplicationContext());<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>} else<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>{<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
3'>                            </span>totalRam = TaskUtil.getTotalRam();<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>}<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>// </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>数据转化</span><span
lang=EN-US style='color:blue'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>String totRam = Formatter.formatFileSize(getApplicationContext(),
totalRam);<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>tv_taskmanager_freeandtotalram.setText(&quot;</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri;color:blue'>剩余</span><span lang=EN-US style='color:blue'>/</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri;color:blue'>总内存</span><span lang=EN-US style='color:blue'>:\n&quot; +
availaRam + &quot;/&quot; + <span style='mso-tab-count:3'>                      </span>totRam);<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>为下次清理进程做准备</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>deleteTaskInfos.clear();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>deleteTaskInfos
= null;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>。。。。</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h1><a name="_Toc487532713"><span lang=ZH-CN style='font-size:14.0pt;
mso-bidi-font-size:18.0pt;line-height:300%;font-family:等线;mso-bidi-font-family:
等线;mso-font-kerning:1.0pt'>第二集</span></a><span style='mso-bookmark:_Toc487532713'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:18.0pt;line-height:300%;
font-family:等线;mso-bidi-font-family:等线;mso-font-kerning:1.0pt'><span
style='mso-spacerun:yes'>   </span></span></span><span style='mso-bookmark:
_Toc487532713'><span lang=ZH-CN style='font-size:14.0pt;mso-bidi-font-size:
18.0pt;line-height:300%;font-family:等线;mso-bidi-font-family:等线;mso-font-kerning:
1.0pt'>桌面清理小控件</span></span><span style='mso-bookmark:_Toc487532713'></span><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:18.0pt;line-height:300%;
font-family:等线;mso-bidi-font-family:等线;mso-font-kerning:1.0pt'><o:p></o:p></span></h1>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><!--[if gte vml 1]><v:shape id="图片_x0020_3"
 o:spid="_x0000_i1026" type="#_x0000_t75" style='width:172.5pt;height:51pt;
 mso-position-horizontal-relative:page;mso-position-vertical-relative:page'>
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="day11.files/image003.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=230 height=68
src="day11.files/image004.jpg" v:shapes="图片_x0020_3"><![endif]><span
style='mso-spacerun:yes'> </span></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>很多手机卫士都有桌面清理小控件，如上所示。现在来实现这个小控件。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>在</span><span lang=EN-US>API</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>中有关于这个小控件的说明，它是一个</span><span lang=EN-US>App Widget</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>：</span></p>

<p class=MsoNormal><span lang=EN-US><!--[if gte vml 1]><v:shape id="图片_x0020_5"
 o:spid="_x0000_i1027" type="#_x0000_t75" style='width:415.5pt;height:213.75pt;
 mso-position-horizontal-relative:page;mso-position-vertical-relative:page'>
 <v:imagedata src="day11.files/image005.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=554 height=285
src="day11.files/image006.jpg" v:shapes="图片_x0020_5"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>新建一个项目，按照</span><span lang=EN-US>API</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>的说明来实现一个桌面小控件：</span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>在新建的项目中新建一个类：</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>//</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>桌面小控件</span></p>

<p class=MsoNormal><span lang=EN-US>public class MyWidget extends
AppWidgetProvider</span></p>

<p class=MsoNormal><span lang=EN-US>{// </span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>继承自</span><span lang=EN-US>AppWidgetProvider</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>。</span><span lang=EN-US>API</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>说这是一个广播接收者，并且提供了配置文件；所以把</span><span
lang=EN-US>API</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>中的配置文件部分复制到清单文件中，并进行修正：</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'> </span>&lt;receiver android:name=&quot;com.itheima.mobliesafe75.receiver.MyWidget&quot;
&gt;//</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>修改类名</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>           
</span>&lt;intent-filter&gt;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>                </span>&lt;action
android:name=&quot;android.appwidget.action.APPWIDGET_UPDATE&quot; /&gt;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>           
</span>&lt;/intent-filter&gt;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>           
</span>&lt;meta-data</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>               
</span>android:name=&quot;android.appwidget.provider&quot;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>               
</span>android:resource=&quot;@xml/example_appwidget_info&quot; /&gt;</span></p>

<p class=MsoNormal style='margin-left:63.0pt;text-indent:21.0pt'><span
lang=EN-US>//</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>把这个文件复制到手机卫士项目中，此文件</span><span
lang=EN-US>API</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>中有：</span></p>

<p class=MsoNormal><span lang=EN-US><!--[if gte vml 1]><v:shape id="图片_x0020_7"
 o:spid="_x0000_i1028" type="#_x0000_t75" style='width:458.25pt;height:211.5pt;
 mso-position-horizontal-relative:page;mso-position-vertical-relative:page'>
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="day11.files/image007.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=611 height=282
src="day11.files/image008.jpg" v:shapes="图片_x0020_7"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US>//</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>复制过来后修改如下：</span></p>

<p class=MsoNormal><span lang=EN-US>&lt;?xml version=&quot;1.0&quot;
encoding=&quot;utf-8&quot;?&gt;</span></p>

<p class=MsoNormal><span lang=EN-US>&lt;appwidget-provider
xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>   
</span>android:minHeight=&quot;72dp&quot;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>   
</span>android:minWidth=&quot;275dp&quot;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>   
</span>android:updatePeriodMillis=&quot;0&quot; </span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>   
</span>android:initialLayout=&quot;@layout/process_widget&quot;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>   
</span>android:resizeMode=&quot;horizontal|vertical&quot;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>  
</span>&gt;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>&lt;/appwidget-provider&gt;</span></p>

<p class=MsoNormal><span lang=EN-US>&lt;!--</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span></span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>以下说明</span><span lang=EN-US>API</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>中都有：</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>minWidth,minHeight
: </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>最小的宽高</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>updatePeriodMillis
: </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>更新时间</span><span lang=EN-US>,</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>毫秒值</span><span lang=EN-US>,</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>最短不能小于</span><span
lang=EN-US>30</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>分钟</span><span lang=EN-US>,</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>设置</span><span lang=EN-US>0</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>跟</span><span
lang=EN-US>30</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>都是一个效果</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>previewImage
: </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>预览图片</span><span lang=EN-US>,</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>不设置默认使用应用图标。可有可无</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>initialLayout
:widget</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>布局文件。此布局文件设置成什么样，桌面小控件就显示什么样</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>configure
: </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>创建</span><span lang=EN-US>widget</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>之后会启动哪个</span><span lang=EN-US>activity</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>。可有可无</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>resizeMode
: </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>设置</span><span lang=EN-US>widget</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>显示尺寸的规则</span><span lang=EN-US>,</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>主要用来设置屏幕横竖屏切换保证</span><span lang=EN-US>widget</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>布</span><span lang=EN-US><span style='mso-tab-count:1'>  </span></span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>局不会变形</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>widgetCategory
: </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>设置</span><span lang=EN-US>widget</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>显示在什么地方</span><span lang=EN-US> ,home_screen : </span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>桌面</span><span lang=EN-US><span style='mso-spacerun:yes'>   
</span>keyguard:</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>键盘。</span><span lang=EN-US><span
style='mso-tab-count:1'>         </span></span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>不设置的话默认在桌面。可有可无</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>initialKeyguardLayout
: </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>设置锁屏的时候显示控件的布局样式。可有可无</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>initialLayout</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>属性设置的文件中先随便放上一个</span><span lang=EN-US>TextView</span></p>

<p class=MsoNormal><span lang=EN-US>--&gt;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>如上设置好后，在模拟器的如下界面中找到小控件：</span></p>

<p class=MsoNormal><span lang=EN-US><!--[if gte vml 1]><v:shape id="图片_x0020_9"
 o:spid="_x0000_i1029" type="#_x0000_t75" style='width:150pt;height:210pt;
 mso-position-horizontal-relative:page;mso-position-vertical-relative:page'>
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="day11.files/image009.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=200 height=280
src="day11.files/image010.jpg" v:shapes="图片_x0020_9"><![endif]></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>找到小控件后直接拖到桌面上即可。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>此外还要注意，有些控件是不能放到桌面小控件上的，比如</span><span
lang=EN-US>EditText,</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>放到小控件上后，小控件会出现如下错误显示：</span></p>

<p class=MsoNormal><span lang=EN-US><!--[if gte vml 1]><v:shape id="图片_x0020_14"
 o:spid="_x0000_i1030" type="#_x0000_t75" style='width:148.5pt;height:45.75pt;
 mso-position-horizontal-relative:page;mso-position-vertical-relative:page'>
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="day11.files/image011.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=198 height=61
src="day11.files/image012.jpg" v:shapes="图片_x0020_14"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'> </span></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>凡是类的源码前有个</span><span lang=EN-US>@RemoveView</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>注解的控件都能在小控件上显示，没有此注解的都不能在小控件上显示：</span></p>

<p class=MsoNormal><span lang=EN-US>TextView</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>类前有：</span></p>

<p class=MsoNormal><span lang=EN-US><!--[if gte vml 1]><v:shape id="图片_x0020_12"
 o:spid="_x0000_i1031" type="#_x0000_t75" style='width:227.25pt;height:55.5pt;
 mso-position-horizontal-relative:page;mso-position-vertical-relative:page'>
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="day11.files/image013.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=303 height=74
src="day11.files/image014.jpg" v:shapes="图片_x0020_12"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US>Button</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>类前也有：</span></p>

<p class=MsoNormal><span lang=EN-US><!--[if gte vml 1]><v:shape id="图片_x0020_13"
 o:spid="_x0000_i1032" type="#_x0000_t75" style='width:234pt;height:54pt;
 mso-position-horizontal-relative:page;mso-position-vertical-relative:page'>
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="day11.files/image015.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=312 height=72
src="day11.files/image016.jpg" v:shapes="图片_x0020_13"><![endif]></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>所以</span><span lang=EN-US>TextView</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>和</span><span lang=EN-US>Button</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>就都能在小控件上显示。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>但是</span><span lang=EN-US>EditView</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>类前就没有：</span></p>

<p class=MsoNormal><span lang=EN-US><!--[if gte vml 1]><v:shape id="图片_x0020_10"
 o:spid="_x0000_i1033" type="#_x0000_t75" style='width:258pt;height:66.75pt;
 mso-position-horizontal-relative:page;mso-position-vertical-relative:page'>
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="day11.files/image017.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=344 height=89
src="day11.files/image018.jpg" v:shapes="图片_x0020_10"><![endif]></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>所以</span><span lang=EN-US>EditText</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>就不能在小控件上显示。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'> </span>&lt;/receiver&gt;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>//</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>以下方法属于小控件的生命周期</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
void onReceive(Context context, Intent intent)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>System.out.println(&quot;onReceive&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>super.onReceive(context,
intent);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
void onUpdate(Context context, AppWidgetManager appWidgetManager, int[]
appWidgetIds)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>System.out.println(&quot;onUpdate&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>super.onUpdate(context,
appWidgetManager, appWidgetIds);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
void onDeleted(Context context, int[] appWidgetIds)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>System.out.println(&quot;onDeleted&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>super.onDeleted(context,
appWidgetIds);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
void onEnabled(Context context)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>System.out.println(&quot;onEnabled&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>super.onEnabled(context);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
void onDisabled(Context context)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>System.out.println(&quot;onDisabled&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>super.onDisabled(context);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>}</span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>桌面小控件生命周期规律如下：</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span></span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>第一次创建</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>10-20
02:08:34.418: I/System.out(4570): onReceive</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>10-20
02:08:34.418: I/System.out(4570): onEnabled</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>10-20
02:08:34.418: I/System.out(4570): onReceive</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>10-20
02:08:34.418: I/System.out(4570): onUpdate</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>10-20
02:08:37.788: I/System.out(4570): onReceive</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span></span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>第二次创建</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>10-20
02:09:27.292: I/System.out(4570): onReceive</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>10-20
02:09:27.292: I/System.out(4570): onUpdate</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>10-20
02:09:31.439: I/System.out(4570): onReceive</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span></span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>第三次创建</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>10-20
02:09:56.408: I/System.out(4570): onReceive</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>10-20
02:09:56.408: I/System.out(4570): onUpdate</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>10-20
02:10:00.769: I/System.out(4570): onReceive</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span></span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>第一次删除</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>10-20
02:10:28.303: I/System.out(4570): onReceive</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>10-20
02:10:28.303: I/System.out(4570): onDeleted</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span></span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>第二次删除</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>10-20
02:10:45.319: I/System.out(4570): onReceive</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>10-20
02:10:45.319: I/System.out(4570): onDeleted</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span></span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>删除最后一个</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>10-20
02:11:09.370: I/System.out(4570): onReceive</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>10-20
02:11:09.370: I/System.out(4570): onDeleted</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>10-20
02:11:09.380: I/System.out(4570): onReceive</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>10-20
02:11:09.380: I/System.out(4570): onDisabled</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>总结规律如下</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>1.</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>第一次创建的时候调用</span><span lang=EN-US>onEnabled</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>2.</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>每次创建都会调用</span><span lang=EN-US>onUpdate</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>3.</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>每次删除都会调用</span><span lang=EN-US>onDeleted</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>4.</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>删除最后一个会调用</span><span lang=EN-US>onDisabled</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>5.</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>不管什么操作都会调用</span><span lang=EN-US>onReceive</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>以上生命周期在不同的定制系统中可能先后顺序会有所不同。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>下面把上面创建的小控件移植到手机卫士项目中。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>把上面的</span><span lang=EN-US>MyWidget</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>类和其对应的清单文件中的配置移植到手机卫士项目中；把</span><span lang=EN-US>xml/example_appwidget_info.xml</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>也复制手机卫士项目中；再把小控件的界面布局文件复制过来。其中前面测试的时候，界面布局文件是随意设置的，现在来仿照金山卫士的小控件布局文件进行设置：</span></p>

<p class=MsoNormal><span lang=EN-US><!--[if gte vml 1]><v:shape id="图片_x0020_15"
 o:spid="_x0000_i1034" type="#_x0000_t75" style='width:172.5pt;height:51pt;
 mso-position-horizontal-relative:page;mso-position-vertical-relative:page'>
 <v:imagedata src="day11.files/image003.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=230 height=68
src="day11.files/image019.jpg" v:shapes="图片_x0020_15"><![endif]></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>现在来在金山卫士中把这个布局文件复制出来，就要使用反编译工具进行操作了。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>金山卫士的</span><span lang=EN-US>apk</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>文件如果直接用解压文件打开，则得到的只能查看图片资源，</span><span lang=EN-US>xml</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>和</span><span lang=EN-US>java</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>文件都不能查看，都是乱码。使用</span><span
lang=EN-US>android</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>逆向助手可以得到</span><span lang=EN-US>xml</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>文件和</span><span lang=EN-US>java</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>文件。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>获取</span><span lang=EN-US>xml</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>文件如下操作：</span></p>

<p class=MsoNormal><span lang=EN-US><!--[if gte vml 1]><v:shape id="图片_x0020_16"
 o:spid="_x0000_i1035" type="#_x0000_t75" style='width:256.5pt;height:227.25pt;
 mso-position-horizontal-relative:page;mso-position-vertical-relative:page'>
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="day11.files/image020.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=342 height=303
src="day11.files/image021.jpg" v:shapes="图片_x0020_16"><![endif]></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>获取</span><span lang=EN-US>java</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>文件如下操作：</span></p>

<p class=MsoNormal><span lang=EN-US><!--[if gte vml 1]><v:shape id="图片_x0020_18"
 o:spid="_x0000_i1036" type="#_x0000_t75" style='width:256.5pt;height:225.75pt;
 mso-position-horizontal-relative:page;mso-position-vertical-relative:page'>
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="day11.files/image022.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=342 height=301
src="day11.files/image023.jpg" v:shapes="图片_x0020_18"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>现在要从解压出来的金山卫士项目中寻找桌面小程序的布局文件，所以要采用解压</span><span
lang=EN-US>xml</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>的方法进行反编译。反编译出来后，先从清单文件中去查找：因为小控件的本质是广播接收者，并且其所监听的事件</span><span
lang=EN-US>android.appwidget.action.APPWIDGET_UPDATE</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>是固定的，所以在解压出来的金山卫士的清单文件中查找</span><span lang=EN-US>android.appwidget.action.APPWIDGET_UPDATE</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>：</span></p>

<p class=MsoNormal><span lang=EN-US><!--[if gte vml 1]><v:shape id="图片_x0020_20"
 o:spid="_x0000_i1037" type="#_x0000_t75" style='width:415.5pt;height:47.25pt;
 mso-position-horizontal-relative:page;mso-position-vertical-relative:page'>
 <v:imagedata src="day11.files/image024.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=554 height=63
src="day11.files/image025.jpg" v:shapes="图片_x0020_20"><![endif]></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>可见有个源文件</span><span lang=EN-US>@xml/process_widget_provider</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>，在</span><span lang=EN-US>xml</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>路径下再找到</span><span
lang=EN-US>process_widget_provider</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>文件：</span></p>

<p class=MsoNormal><span lang=EN-US><!--[if gte vml 1]><v:shape id="图片_x0020_22"
 o:spid="_x0000_i1038" type="#_x0000_t75" style='width:177pt;height:36.75pt;
 mso-position-horizontal-relative:page;mso-position-vertical-relative:page'>
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="day11.files/image026.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=236 height=49
src="day11.files/image027.jpg" v:shapes="图片_x0020_22"><![endif]></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>打开它，再找到其中的</span><span lang=EN-US>android:initialLayout=&quot;@layout/process_widget&quot;</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>，这个属性指向的就是小控件的界面布局文件：</span></p>

<p class=MsoNormal><span lang=EN-US><!--[if gte vml 1]><v:shape id="图片_x0020_23"
 o:spid="_x0000_i1039" type="#_x0000_t75" style='width:172.5pt;height:33.75pt;
 mso-position-horizontal-relative:page;mso-position-vertical-relative:page'>
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="day11.files/image028.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=230 height=45
src="day11.files/image029.jpg" v:shapes="图片_x0020_23"><![endif]></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>把</span><span lang=EN-US>process_widget</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>文件复制到手机卫士项目的</span><span lang=EN-US>layout</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>路径下，金山卫士的桌面小控件布局文件就复制过来了。可见会报一些错，主要是所指向的图片资源，</span><span lang=EN-US>color</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>资源等还没复制到手机卫士项目中，自己试着修复这些错误。然后把这个文件设置给手机卫士的小控件布局文件。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>运行手机卫士项目后，在模拟器的</span></p>

<p class=MsoNormal><span lang=EN-US><!--[if gte vml 1]><v:shape id="图片_x0020_25"
 o:spid="_x0000_i1040" type="#_x0000_t75" style='width:150pt;height:210pt;
 mso-position-horizontal-relative:page;mso-position-vertical-relative:page'>
 <v:imagedata src="day11.files/image009.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=200 height=280
src="day11.files/image030.jpg" v:shapes="图片_x0020_25"><![endif]></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>中找到手机卫士小控件，再拖到桌面上，效果如下：</span></p>

<p class=MsoNormal><span lang=EN-US><!--[if gte vml 1]><v:shape id="图片_x0020_26"
 o:spid="_x0000_i1041" type="#_x0000_t75" style='width:138pt;height:208.5pt;
 mso-position-horizontal-relative:page;mso-position-vertical-relative:page'>
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="day11.files/image031.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=184 height=278
src="day11.files/image032.jpg" v:shapes="图片_x0020_26"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>上面只是设置了桌面小控件的布局，现在来设置它的功能。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><!--[if gte vml 1]><v:shape id="图片_x0020_27"
 o:spid="_x0000_i1042" type="#_x0000_t75" style='width:219.75pt;height:57.75pt;
 mso-position-horizontal-relative:page;mso-position-vertical-relative:page'>
 <v:imagedata src="day11.files/image033.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=293 height=77
src="day11.files/image034.jpg" v:shapes="图片_x0020_27"><![endif]></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>虽然在上面的</span><span lang=EN-US>example_appwidget_info.xml</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>文件中有个设置数据更新时间的属性：</span></p>

<p class=MsoNormal><span lang=EN-US>android:updatePeriodMillis=&quot;0&quot;</span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>但是其最小时间是</span><span lang=EN-US>30</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>分钟，实际使用中不可能</span><span lang=EN-US>30</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>分钟才去更新一次数据。所以我们采用服务的方式自己规定时间来更新小控件上的数据。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>//</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>现在要考虑什么时候这个开启服务，什么时候关闭这个服务？</span></p>

<p class=MsoNormal><span lang=EN-US>// </span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>当小控件创建的时候开启这个服务，当小控件删除的时候关闭这个服务</span></p>

<p class=MsoNormal><span lang=EN-US>//</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>所以就要用到上面的小控件的生命周期方法了。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>//</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>根据小控件的生命周期方法中：</span></p>

<p class=MsoNormal><span lang=EN-US>//1.</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>第一次创建的时候调用</span><span lang=EN-US>onEnabled</span></p>

<p class=MsoNormal><span lang=EN-US>//4.</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>删除最后一个会调用</span><span lang=EN-US>onDisabled</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>//</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>所以在</span><span
lang=EN-US>MyWidget</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>类中的两个方法中增加如下：</span></p>

<p class=MsoNormal><span lang=EN-US>//@Override</span></p>

<p class=MsoNormal><span lang=EN-US>//public void onEnabled(Context context)</span></p>

<p class=MsoNormal><span lang=EN-US>//{</span></p>

<p class=MsoNormal><span lang=EN-US>//<span style='mso-tab-count:1'>      </span>System.out.println(&quot;onEnabled&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US>//<span style='mso-tab-count:1'>      </span>super.onEnabled(context);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>//</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>开启更新服务</span></p>

<p class=MsoNormal><span lang=EN-US>//Intent intent = new Intent(context,
WidgetService.class);</span></p>

<p class=MsoNormal><span lang=EN-US>//context.startService(intent);</span></p>

<p class=MsoNormal><span lang=EN-US>//}</span></p>

<p class=MsoNormal><span lang=EN-US>//</span></p>

<p class=MsoNormal><span lang=EN-US>//@Override</span></p>

<p class=MsoNormal><span lang=EN-US>//public void onDisabled(Context context)</span></p>

<p class=MsoNormal><span lang=EN-US>//{</span></p>

<p class=MsoNormal><span lang=EN-US>//<span style='mso-tab-count:1'>      </span>System.out.println(&quot;onDisabled&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US>//<span style='mso-tab-count:1'>      </span>super.onDisabled(context);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>//<span style='mso-tab-count:1'>      </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>关闭服务</span></p>

<p class=MsoNormal><span lang=EN-US>//<span style='mso-tab-count:1'>      </span>Intent
intent = new Intent(context, WidgetService.class);</span></p>

<p class=MsoNormal><span lang=EN-US>//<span style='mso-tab-count:1'>      </span>context.stopService(intent);</span></p>

<p class=MsoNormal><span lang=EN-US>//}</span></p>

<p class=MsoNormal><span lang=EN-US>//</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>注意：把小控件拖到桌面上是创建，从桌面上移除是删除小控件。</span></p>

<p class=MsoNormal><span lang=EN-US>//</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>可据此在设置中查看此服务是否能开启关闭</span><span
lang=EN-US> </span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>public class WidgetService extends Service</span></p>

<p class=MsoNormal><span lang=EN-US>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
AppWidgetManager appWidgetManager;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
WidgetReceiver widgetReceiver;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
Timer timer;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
IBinder onBind(Intent intent)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>return
null;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>清理进程的广播接受者</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
class WidgetReceiver extends BroadcastReceiver</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>public
void onReceive(Context context, Intent intent)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>清理进程</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>killProcess();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
void onCreate()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>super.onCreate();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>更新桌面小控件</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>第一步：注册清理进程的广播接受者</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
1.</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>广播接受者</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>widgetReceiver
= new WidgetReceiver();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
2.</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>设置接受的广播事件</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>IntentFilter
intentFilter = new IntentFilter();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>intentFilter.addAction(&quot;aa.bb.cc&quot;);//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>发送什么广播，就接受什么广播</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
3.</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>注册广播接受者</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>registerReceiver(widgetReceiver,
intentFilter);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>注意在</span><span lang=EN-US>onDestory</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>中取消注册广播接受者</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取</span><span lang=EN-US>widget</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>的管理者：注意这里不能再用</span><span lang=EN-US>getSystemService</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>appWidgetManager
= AppWidgetManager.getInstance(this);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>更新操作</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>updateWidgets();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>清理进程</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
void killProcess()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>ActivityManager
am = (ActivityManager) getSystemService(ACTIVITY_SERVICE);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取正在运行进程</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>List&lt;RunningAppProcessInfo&gt;
rap = am.getRunningAppProcesses();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>for
(RunningAppProcessInfo rapi : rap)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>手机卫士进程不能被清理</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>if
(!rapi.processName.equals(getPackageName()))</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>am.killBackgroundProcesses(rapi.processName);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
void onDestroy()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>super.onDestroy();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>服务停止的时候停止更新</span><span lang=EN-US>widget</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>stopUpdates();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>注销清理进程的广播接受者</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>if
(widgetReceiver != null)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>unregisterReceiver(widgetReceiver);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>widgetReceiver
= null;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>停止更新</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
void stopUpdates()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>if
(timer != null)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>timer.cancel();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>timer
= null;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>更新</span><span
lang=EN-US>widget</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>：每隔一段时间更新一次</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
void updateWidgets()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>计数器</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>timer
= new Timer();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>要执行的操作</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
task : </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>要执行的操作</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
when : </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>延迟的时间</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
period : </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>每次执行的间隔时间</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>timer.schedule(new
TimerTask()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>public
void run()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>System.out.println(&quot;widget</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>更新了</span><span lang=EN-US>......&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取组件的标示</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>ComponentName
provider = new ComponentName(WidgetService.this, MyWidget.class);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取远程布局：</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>比如说，小控件是属于手机卫士项目的，但是小控件的布局不在手机卫士项目中展示，而是在桌面上展示</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>小控件的布局相对于手机卫士来说，就是远程布局</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
packageName : </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>应用的包名</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
layoutId :widget</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>的布局文件</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>RemoteViews
views = new RemoteViews(getPackageName(), R.layout.process_widget);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>远程布局不能通过</span><span lang=EN-US>findviewbyid</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>获取控件</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>更新布局文件中相应控件的值</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
viewId :</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>更新控件的</span><span lang=EN-US>id</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
text : </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>更新的内容</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>views.setTextViewText(R.id.process_count,
&quot;</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>正在运行软件</span><span lang=EN-US>:&quot; +
TaskUtil.getProcessCount(WidgetService.this));</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>views.setTextViewText(</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>R.id.process_memory,</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>&quot;</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>可用内存</span><span lang=EN-US>:&quot;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:8'>                                                                           </span>+
Formatter.formatFileSize(WidgetService.this,</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:10'>                                                                                             </span>TaskUtil.getAvailableRam(WidgetService.this)));</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>按钮点击事件</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>Intent
intent = new Intent();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>intent.setAction(&quot;aa.bb.cc&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>设置要发送的广播</span><span lang=EN-US>,aa.bb.cc:</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>自定义的广播事件</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>发送广播：这儿已被注释，采用下面的</span><span lang=EN-US>pendingIntent</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>方式进行</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
sendBroadcast(intent);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>通过发送一个广播表示要执行清理操作</span><span lang=EN-US>,</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>通过接受发送的广播执行清理操作</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
flags : </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>指定信息的标签</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>注意服务的上下文的获取方式：</span><span lang=EN-US>WidgetService.this</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>PendingIntent
pendingIntent = PendingIntent.getBroadcast(WidgetService.this, 0, intent,</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>PendingIntent.FLAG_UPDATE_CURRENT);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
viewId : </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>点击的控件的</span><span lang=EN-US>id</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
pendingIntent : </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>延迟意图：包含一个</span><span lang=EN-US>intent</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>意图</span><span lang=EN-US>,</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>当点击的时候才去执行这个意图</span><span
lang=EN-US>,</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>不点击就不执行意图</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>views.setOnClickPendingIntent(R.id.btn_clear,
pendingIntent);// </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>这里是一键清理按钮的点击事件</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>更新操作</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>appWidgetManager.updateAppWidget(provider,
views);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>},
2000, 2000);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><!--[if gte vml 1]><v:shape id="图片_x0020_40"
 o:spid="_x0000_i1043" type="#_x0000_t75" style='width:130.5pt;height:183pt;
 mso-position-horizontal-relative:page;mso-position-vertical-relative:page'>
 <v:imagedata src="day11.files/image035.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=174 height=244
src="day11.files/image036.jpg" v:shapes="图片_x0020_40"><![endif]></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>在昨天的代码中，上图中的设置按钮功能还没有实现，现在来实现它。</span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>此按钮的功能设置为显示或者隐藏系统进程列表：点击的时候隐藏上方的系统进程列表，只有用户进程列表；再次点击的时候二者都显示。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>在</span><span lang=EN-US>TaskManagerActivity</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>中，定义一个</span><span lang=EN-US>boolean</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>型的成员变量</span><span lang=EN-US>isshowSystem</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>，然后在内部类</span><span lang=EN-US>Myadapter</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>中如下设置：</span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>。。。。</span></p>

<p class=MsoNormal><span lang=EN-US>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>public
int getCount()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:21.0pt'><span
lang=EN-US>return isshowSystem == true ? userappinfo.size() + 1 +
systemappinfo.size() + 1 : <span style='mso-tab-count:1'>     </span>userappinfo.size()
+ 1;</span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:21.0pt'><span
lang=EN-US>//</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>当成员变量</span><span lang=EN-US>isshowSystem</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>为</span><span lang=EN-US>true</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>的时候，返回</span><span
lang=EN-US>userappinfo.size() + 1 + <span style='mso-tab-count:2'>              </span>//systemappinfo.size()
+ 1</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>，当为</span><span lang=EN-US>false</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>的时候，返回</span><span lang=EN-US>userappinfo.size() + 1</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}</span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>。。。。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>然后设置按钮的点击事件如下：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>设置</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
void setting(View v)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
true </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>改为</span><span lang=EN-US>false false</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>改为</span><span lang=EN-US>true</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>isshowSystem
= !isshowSystem;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>更新界面</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>myadapter.notifyDataSetChanged();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>如上即可实现隐藏显示系统列表的功能。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h1><a name="_Toc487532714"><span lang=ZH-CN style='font-size:14.0pt;
mso-bidi-font-size:18.0pt;line-height:300%;font-family:等线;mso-bidi-font-family:
等线;mso-font-kerning:1.0pt'>第三集</span></a><span style='mso-bookmark:_Toc487532714'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:18.0pt;line-height:300%;
font-family:等线;mso-bidi-font-family:等线;mso-font-kerning:1.0pt'><span
style='mso-spacerun:yes'>   </span></span></span><span style='mso-bookmark:
_Toc487532714'><span lang=ZH-CN style='font-size:14.0pt;mso-bidi-font-size:
18.0pt;line-height:300%;font-family:等线;mso-bidi-font-family:等线;mso-font-kerning:
1.0pt'>锁屏清理进程</span></span><span style='mso-bookmark:_Toc487532714'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:18.0pt;line-height:300%;
font-family:等线;mso-bidi-font-family:等线;mso-font-kerning:1.0pt'>/</span></span><span
style='mso-bookmark:_Toc487532714'><span lang=ZH-CN style='font-size:14.0pt;
mso-bidi-font-size:18.0pt;line-height:300%;font-family:等线;mso-bidi-font-family:
等线;mso-font-kerning:1.0pt'>解锁更新</span></span><span style='mso-bookmark:_Toc487532714'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:18.0pt;line-height:300%;
font-family:等线;mso-bidi-font-family:等线;mso-font-kerning:1.0pt'>Widget</span></span><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:18.0pt;line-height:300%;
font-family:等线;mso-bidi-font-family:等线;mso-font-kerning:1.0pt'><o:p></o:p></span></h1>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>现在来实现另一种功能：当手机锁屏的时候清理后台进程，解锁的时候更新</span><span
lang=EN-US>widget</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>。手机是否锁屏可以采用广播接收者来监听；但是注意，监听手机是否锁屏的广播接收者不能在清单文件中注册，只能通过代码来注册。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>这里的广播接收者可以放在</span><span lang=EN-US>WidgetService</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>中进行：</span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>。。。。</span></p>

<p class=MsoNormal><span lang=EN-US>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>锁屏的广播接受者</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
class ScreenOffReceiver extends BroadcastReceiver</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>public
void onReceive(Context context, Intent intent)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>System.out.println(&quot;</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>锁屏了</span><span lang=EN-US>.....&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>清理进程</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>killProcess();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>停止更新：锁屏的时候一定要停止更新，否则即使锁屏还是会不断地更新</span><span
lang=EN-US>Widget</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US>//</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>很耗电量</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>stopUpdates();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>解锁的广播接受者</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
class ScreenOnReceiver extends BroadcastReceiver</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>public
void onReceive(Context context, Intent intent)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>updateWidgets();//</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>解锁的时候更新</span><span lang=EN-US>widget</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>。。。。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>在</span><span lang=EN-US>WidgetService</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>的</span><span lang=EN-US>onCreate</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>中动态注册：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US>// </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>第二步：注册锁屏的广播接受者</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>screenOffReceiver
= new ScreenOffReceiver();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>设置接受广播事件</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>IntentFilter
screenoffIntentfilter = new IntentFilter();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>screenoffIntentfilter.addAction(Intent.ACTION_SCREEN_OFF);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>registerReceiver(screenOffReceiver,
screenoffIntentfilter);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>第三步：注册解锁的广播接受者</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>screenOnReceiver
= new ScreenOnReceiver();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>IntentFilter
screenOnIntentFilter = new IntentFilter();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>screenOnIntentFilter.addAction(Intent.ACTION_SCREEN_ON);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>registerReceiver(screenOnReceiver,
screenOnIntentFilter);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>注意在</span><span lang=EN-US>onDestroy</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>的方法中取消注册：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
void onDestroy()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>super.onDestroy();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>停止更新</span><span lang=EN-US>widget</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>stopUpdates();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>注销清理进程的广播接受者</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>if
(widgetReceiver != null)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>unregisterReceiver(widgetReceiver);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>widgetReceiver
= null;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}</span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>if (screenOffReceiver != null)<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>{<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
3'>                            </span>unregisterReceiver(screenOffReceiver);<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
3'>                            </span>screenOffReceiver = null;<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>}<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>if (screenOnReceiver != null)<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>{<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
3'>                            </span>unregisterReceiver(screenOnReceiver);<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
3'>                            </span>screenOnReceiver = null;<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><span style='mso-tab-count:
2'>                   </span>}<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>到此为止，</span><span lang=EN-US>Widget</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>桌面小控件设置完毕。</span><span lang=EN-US><br style='mso-special-character:
line-break'>
<![if !supportLineBreakNewLine]><br style='mso-special-character:line-break'>
<![endif]></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h1><a name="_Toc487532715"><span lang=ZH-CN style='font-size:14.0pt;
mso-bidi-font-size:18.0pt;line-height:300%;font-family:等线;mso-bidi-font-family:
等线;mso-font-kerning:1.0pt'>第四集</span></a><span style='mso-bookmark:_Toc487532715'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:18.0pt;line-height:300%;
font-family:等线;mso-bidi-font-family:等线;mso-font-kerning:1.0pt'><span
style='mso-spacerun:yes'>  </span></span></span><span style='mso-bookmark:_Toc487532715'><span
lang=ZH-CN style='font-size:14.0pt;mso-bidi-font-size:18.0pt;line-height:300%;
font-family:等线;mso-bidi-font-family:等线;mso-font-kerning:1.0pt'>屏幕适配</span></span><span
style='mso-bookmark:_Toc487532715'></span><span lang=EN-US style='font-size:
14.0pt;mso-bidi-font-size:18.0pt;line-height:300%;font-family:等线;mso-bidi-font-family:
等线;mso-font-kerning:1.0pt'><o:p></o:p></span></h1>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>前面设置过的</span><span lang=EN-US>popuWindow</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>，在不同大小的屏幕上显示的效果是不一样的：</span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>分辨率小的屏幕：</span></p>

<p class=MsoNormal><span lang=EN-US><!--[if gte vml 1]><v:shape id="图片_x0020_21"
 o:spid="_x0000_i1044" type="#_x0000_t75" style='width:109.5pt;height:76.5pt;
 mso-position-horizontal-relative:page;mso-position-vertical-relative:page'>
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="day11.files/image037.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=146 height=102
src="day11.files/image038.jpg" v:shapes="图片_x0020_21"><![endif]></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>分辨率大的屏幕：</span></p>

<p class=MsoNormal><span lang=EN-US><!--[if gte vml 1]><v:shape id="_x0000_i1045"
 type="#_x0000_t75" style='width:186pt;height:117.75pt;
 mso-position-horizontal-relative:page;mso-position-vertical-relative:page'>
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="day11.files/image039.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=248 height=157
src="day11.files/image040.jpg" v:shapes="_x0000_i1045"><![endif]></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>可见在小的屏幕上，</span><span lang=EN-US>popuwindow</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>离软件图标较远；在分辨率大的屏幕上，</span><span lang=EN-US>popuwindow</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>离软件图标较近。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>找到设置</span><span lang=EN-US>popuwindow</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>的</span><span lang=EN-US>softManagerActivity</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>，再找到其中设置</span><span lang=EN-US>popuwindow</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>位置的代码：</span></p>

<p class=MsoNormal style='margin-left:63.0pt;text-indent:21.0pt'><span
lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:63.0pt;text-indent:21.0pt'><span
lang=EN-US>// 4.</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>获取条目的位置</span><span lang=EN-US>,</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>让气泡显示在相应的条目</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>int[]
location = new int[2];// </span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>保存</span><span
lang=EN-US>x</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>和</span><span lang=EN-US>y</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>坐标的数组</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>view.getLocationInWindow(location);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取</span><span lang=EN-US>x</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>和</span><span lang=EN-US>y</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>的坐标</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>int
x = location[0];</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>int
y = location[1];</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
parent : </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>要挂载在哪个控件上</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
gravity,x,y : </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>控制</span><span lang=EN-US>popuwindow</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>显示的位置</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>popupWindow.showAtLocation(parent,
Gravity.LEFT | Gravity.TOP</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>，</span><span
lang=EN-US style='color:blue'>x + 50</span><span lang=EN-US>, y);</span></p>

<p class=MsoNormal style='margin-left:63.0pt;text-indent:21.0pt'><span
lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:63.0pt;text-indent:21.0pt'><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>原因正是出在上面蓝色部分：横坐标加上了一个固定的值</span><span lang=EN-US>50</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>！小屏幕的</span><span lang=EN-US><span style='mso-tab-count:1'>    </span>50</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>比较宽，大屏幕的</span><span lang=EN-US>50</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>又比较窄。该怎么办？</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:63.0pt;text-indent:21.0pt'><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>注意上面这个</span><span lang=EN-US>50</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>的单位是</span><span lang=EN-US>dp</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>；要使同样的</span><span lang=EN-US>dp</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>都能适配不同的屏幕，就</span><span lang=EN-US><span style='mso-tab-count:1'>    </span></span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>要把这个</span><span lang=EN-US>dp</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>转化成</span><span lang=EN-US>pix</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>单位，转化之后，同一个</span><span lang=EN-US>dp</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>在不同的屏幕上对应</span><span lang=EN-US><span style='mso-tab-count:1'>       </span></span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>的</span><span lang=EN-US>pix</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>就不一样，也就适配了不同的屏幕。</span></p>

<p class=MsoNormal style='margin-left:63.0pt;text-indent:21.0pt'><span
lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>所以把上面的</span><span lang=EN-US>dp</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>单位转化成</span><span lang=EN-US>pix</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>单位就可以了：</span></p>

<p class=MsoNormal><span lang=EN-US>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'> </span>* </span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>此工具类不用过多掌握，网上都有，可直接复制</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US>public class DensityUtil</span></p>

<p class=MsoNormal><span lang=EN-US>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>根据手机的分辨率把</span><span
lang=EN-US> dp</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>转成为</span><span lang=EN-US> pix(</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>像素</span><span lang=EN-US>)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* dpValue</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>：要转化的</span><span lang=EN-US>dp</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>值</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
static int dp2pix(Context context, float dpValue)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>final
float scale = context.getResources().getDisplayMetrics().density; </span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US>// </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>获取屏幕的密度</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>return
(int) (dpValue * scale + 0.5f);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
+0.5f</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>是为了四舍五入</span><span lang=EN-US>:</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
java</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>中</span><span lang=EN-US>:</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>比如</span><span lang=EN-US>3.7</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>会变成</span><span lang=EN-US>3</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>，只会往前四舍五入，不会往后四舍五入</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>为了让</span><span lang=EN-US>3.7</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>变成</span><span lang=EN-US>4</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>，所以</span><span
lang=EN-US> 3.7+0.5 = 4.2</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>，再往前四舍五入，就变成了</span><span
lang=EN-US>4</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>根据手机的分辨率把</span><span
lang=EN-US> pix(</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>像素</span><span lang=EN-US>)</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>的转成为</span><span lang=EN-US> dp</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* pxValue</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>要转化的</span><span lang=EN-US>pix</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>值</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
static int pix2dp(Context context, float pxValue)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>final
float scale = context.getResources().getDisplayMetrics().density;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>return
(int) (pxValue / scale + 0.5f);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>然后调用时如下：</span></p>

<p class=MsoNormal><span lang=EN-US>popupWindow.showAtLocation(parent,
Gravity.LEFT | Gravity.TOP,</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>x
+ DensityUtil.dp2pix(getApplicationContext(), 50), y);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>这样就能解决</span><span lang=EN-US>popuwindow</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>的屏幕适配问题。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>ScollView</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>控件只能有一个子控件；否则会报错。当</span><span lang=EN-US>TextView</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>等控件内容显示不全的时候，也可以采用此控件来进行屏幕适配。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h1><a name="_Toc487532716"><span lang=ZH-CN style='font-size:14.0pt;
mso-bidi-font-size:18.0pt;line-height:300%;font-family:等线;mso-bidi-font-family:
等线;mso-font-kerning:1.0pt'>第五集</span></a><span style='mso-bookmark:_Toc487532716'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:18.0pt;line-height:300%;
font-family:等线;mso-bidi-font-family:等线;mso-font-kerning:1.0pt'><span
style='mso-spacerun:yes'>  </span></span></span><span style='mso-bookmark:_Toc487532716'><span
lang=ZH-CN style='font-size:14.0pt;mso-bidi-font-size:18.0pt;line-height:300%;
font-family:等线;mso-bidi-font-family:等线;mso-font-kerning:1.0pt'>桌面快捷方式</span></span><span
style='mso-bookmark:_Toc487532716'></span><span lang=EN-US style='font-size:
14.0pt;mso-bidi-font-size:18.0pt;line-height:300%;font-family:等线;mso-bidi-font-family:
等线;mso-font-kerning:1.0pt'><o:p></o:p></span></h1>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>新建一个项目，测试桌面快捷方式。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>public class MainActivity extends Activity
{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>protected
void onCreate(Bundle savedInstanceState) {</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>super.onCreate(savedInstanceState);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>setContentView(R.layout.activity_main);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
void addshortcut(View v){</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>给桌面发送一个广播：参数</span><span lang=EN-US>action</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>专门用于创建快捷方式</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>Intent
intent = new Intent(&quot;com.android.launcher.action.INSTALL_SHORTCUT&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>设置属性</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>设置快捷方式名称：第一个参数专门用于设置快捷方式名称</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>intent.putExtra(Intent.EXTRA_SHORTCUT_NAME,
&quot;</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>拨打</span><span lang=EN-US>110&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>设置快捷方式的图标：第一个参数专门用于设置快捷方式图标</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'>    </span>Bitmap value =
BitmapFactory.decodeResource(getResources(), <span style='mso-tab-count:4'>                                    </span><span
style='mso-spacerun:yes'> </span><span style='mso-tab-count:2'>                </span><span
style='mso-tab-count:1'>         </span>R.drawable.ic_launcher);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>intent.putExtra(Intent.EXTRA_SHORTCUT_ICON,
value);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>设置快捷方式要执行的操作：第一个参数专门用于设置快捷方式要执行的操作</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>Intent
intent2 = new Intent();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>intent2.setAction(Intent.ACTION_CALL);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>intent2.setData(Uri.parse(&quot;tel:&quot;+110));</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>intent.putExtra(Intent.EXTRA_SHORTCUT_INTENT,
intent2);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US>//</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>发送广播</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>sendBroadcast(intent);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>注意：这里需要一个权限：</span></p>

<p class=MsoNormal><span lang=EN-US>com.android.launcher.permission.INSTALL_SHORTCUT</span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>此权限是在桌面</span><span lang=EN-US>APP</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>中自定义的权限，在</span><span lang=EN-US>eclipse</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>中是找不到这个权限的。直接复制到清单文件中即可使用。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>上面的快捷方式可以创建多个：多次点击按钮就能创建多个快捷方式。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>将上面的快捷方式移植到手机卫士项目中：快捷方式一般是在程序刚启动的时候就创建，所以在手机卫士的</span><span
lang=EN-US>SplashActivity</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>的</span><span
lang=EN-US>onCreate</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>方法中调用如下方法：</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>创建快捷方式</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
void shortcut()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>if
(sp.getBoolean(&quot;firstshortcut&quot;, true))</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>给桌面发送一个广播</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>Intent
intent = new Intent(&quot;com.android.launcher.action.INSTALL_SHORTCUT&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>设置属性</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>设置快捷方式名称</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>intent.putExtra(Intent.EXTRA_SHORTCUT_NAME,
&quot;</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>手机卫士</span><span lang=EN-US>75&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>设置快捷方式的图标</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>Bitmap
value = BitmapFactory.decodeResource(getResources(), </span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:21.0pt'><span
lang=EN-US>R.drawable.ic_launcher);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>intent.putExtra(Intent.EXTRA_SHORTCUT_ICON,
value);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>设置快捷方式执行的操作：</span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:21.0pt'><span
lang=EN-US>//</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>注意：如果这里使用了显式意图调用</span><span lang=EN-US>HomeActivity</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>，则如下：</span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:21.0pt'><span
lang=EN-US>//Intent intent2 = new
Intent(SplashActivity.this,HomeActivity.class);</span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:21.0pt'><span
lang=EN-US>//</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>但是快捷方式已经被创建在桌面上，桌面</span><span
lang=EN-US>app</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>中没有</span><span lang=EN-US>HomeActivity</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>，</span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:21.0pt'><span
lang=EN-US>//</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>点击快捷方式的时候会显示“应用程序未安装”。</span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:21.0pt'><span
lang=EN-US>//</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>所以这里不能使用显式意图去掉用</span><span lang=EN-US>HomeActivity</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>，相当于桌面</span><span lang=EN-US>app</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>去掉用手</span><span lang=EN-US><span style='mso-tab-count:1'>   </span>//</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>机卫士的</span><span lang=EN-US>HomeActivity</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>：这个程序的</span><span lang=EN-US>Activity</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>去调用另一个程序的</span><span lang=EN-US>Activity</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>，</span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:21.0pt'><span
lang=EN-US>//</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>要使用隐式意图：</span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:21.0pt'><span
lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>Intent
intent2 = new Intent();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>intent2.setAction(&quot;com.itheima.mobliesafe75.home&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>intent2.addCategory(&quot;android.intent.category.DEFAULT&quot;);</span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:21.0pt'><span
lang=EN-US>//</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>为</span><span lang=EN-US>HomeActivity</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>如上设置隐式意图参数</span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:21.0pt'><span
lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>intent.putExtra(Intent.EXTRA_SHORTCUT_INTENT,
intent2);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>sendBroadcast(intent);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>保存已经创建快捷方式的状态：</span><span lang=ZH-CN> </span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>防止创建多个快捷方式，只能创建一个</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>Editor
edit = sp.edit();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>edit.putBoolean(&quot;firstshortcut&quot;,
false);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>edit.commit();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h1><a name="_Toc487532717"><span lang=ZH-CN style='font-size:14.0pt;
mso-bidi-font-size:18.0pt;line-height:300%;font-family:等线;mso-bidi-font-family:
等线;mso-font-kerning:1.0pt'>第六集</span></a><span style='mso-bookmark:_Toc487532717'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:18.0pt;line-height:300%;
font-family:等线;mso-bidi-font-family:等线;mso-font-kerning:1.0pt'><span
style='mso-spacerun:yes'>  </span></span></span><span style='mso-bookmark:_Toc487532717'><span
lang=ZH-CN style='font-size:14.0pt;mso-bidi-font-size:18.0pt;line-height:300%;
font-family:等线;mso-bidi-font-family:等线;mso-font-kerning:1.0pt'>软件加锁解锁功能</span></span><span
style='mso-bookmark:_Toc487532717'></span><span lang=EN-US style='font-size:
14.0pt;mso-bidi-font-size:18.0pt;line-height:300%;font-family:等线;mso-bidi-font-family:
等线;mso-font-kerning:1.0pt'><o:p></o:p></span></h1>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>为某个程序加了锁，当用户点击这个程序的时候，就会弹出要求输入密码的界面：密码正确才能进入程序，否则就进不了程序。这种功能要设置一个看门狗，时时刻刻监视着用户的操作，看用户打开的程序是否是加了锁的程序。这个看门狗就是</span><span
lang=EN-US>Service</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>。下面来设置这种效果。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>先来创建一个新的测试项目：</span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>看门狗（</span><span lang=EN-US>Service</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>）如下：</span></p>

<p class=MsoNormal><span lang=EN-US>public class WatchDogService extends
Service</span></p>

<p class=MsoNormal><span lang=EN-US>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
IBinder onBind(Intent intent)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>return
null;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
void onCreate()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>super.onCreate();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>时时刻刻监听用户打开的程序</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
activity</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>都是存放在任务栈中的</span><span lang=EN-US>,</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>一个应用只有一个任务栈</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>final
ActivityManager am = (ActivityManager) getSystemService(ACTIVITY_SERVICE);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>new
Thread()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>public
void run()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>while
(true)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>监听操作</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>监听用户打开了哪些任务栈</span><span lang=EN-US>,</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>即打开了哪些应用</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取正在运行的任务栈</span><span lang=EN-US>,</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>如果任务栈运行</span><span lang=EN-US>,</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>就表示应用打开过</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>//
maxNum : </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>获取正在运行的任务栈的个数</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>现在打开的应用的任务栈</span><span lang=EN-US>,</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>永远在第一个</span><span lang=EN-US>,</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>而之前</span><span lang=EN-US>(</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>点击</span><span
lang=EN-US>home</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>最小</span><span lang=EN-US><span
style='mso-tab-count:5'>                                           </span>//</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>化</span><span lang=EN-US>,</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>没有退出</span><span
lang=EN-US>)</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>的应用的任务栈会依次往后推</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>所以我们要获取现在打开的应用，就要设置为</span><span lang=EN-US>1</span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US>//</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>这个地方一定要能理解清楚</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>List&lt;RunningTaskInfo&gt;
runningTasks = am.getRunningTasks(1);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>增加权限：</span><span lang=EN-US>GET_TASKS</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>System.out.println(&quot;----------------------&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>for
(RunningTaskInfo rti : runningTasks)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取任务栈</span><span lang=EN-US>,</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>栈底的</span><span lang=EN-US>activity</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>ComponentName
baseactivity = rti.baseActivity;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取任务栈栈顶的</span><span lang=EN-US>activity</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>//
* runningTaskInfo.topActivity;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>String
packageName = baseactivity.getPackageName();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>System.out.println(packageName);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>启动了哪个应用，就打印出哪个应用的包名</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>if
(packageName.equals(&quot;com.android.mms&quot;))</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>如果启动了短信应用程序</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:7'>                                                                 </span>System.out.println(&quot;1111111&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:7'>                                                                 </span>Intent
intent = new Intent(WatchDogService.this, <span style='mso-tab-count:8'>                                                                        </span><span
style='mso-tab-count:1'>         </span>MainActivity.class);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:7'>                                                                 </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>因为</span><span lang=EN-US>activity</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>保存在任务栈中</span><span lang=EN-US>,</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>而服务</span><span lang=EN-US>,</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>广播没有保存在任</span><span
lang=EN-US><span style='mso-tab-count:7'>                                                            </span>//</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>务栈中</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:7'>                                                                 </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>所以在服务</span><span lang=EN-US>,</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>广播中跳转到</span><span lang=EN-US>activity</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>必须给</span><span lang=EN-US>activity</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>设置任</span><span lang=EN-US><span style='mso-tab-count:7'>                                                            </span>//</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>务栈</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:7'>                                                                 </span>intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:7'>                                                                 </span>startActivity(intent);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>System.out.println(&quot;----------------------&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>SystemClock.sleep(3000);//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>每隔</span><span lang=EN-US>3</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>秒执行一次循环</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>};</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}.start();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>把上面看门狗移植到手机卫士项目中：记得注册此服务并且增加权限：</span><span
lang=EN-US>GET_TASKS</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>手机卫士中要实现的功能如下：在左边的图中为程序加锁，在右边的图中为程序解锁。</span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>为了使两个图中能记录加锁或者解锁的程序，所以要用数据库把哪些程序加了锁，哪些程序解了锁记录下来。这里要保存的数据较多，所以用数据库，如果要保存的数据很少，可以用</span><span
lang=EN-US>SP</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>。</span></p>

<p class=MsoNormal><span lang=EN-US><!--[if gte vml 1]><v:shape id="_x0000_i1046"
 type="#_x0000_t75" alt="" style='width:125.25pt;height:174.75pt'>
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="day11.files/image041.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=167 height=233
src="day11.files/image042.jpg" v:shapes="_x0000_i1046"><![endif]><!--[if gte vml 1]><v:shape
 id="_x0000_i1047" type="#_x0000_t75" alt="" style='width:116.25pt;height:175.5pt'>
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="day11.files/image043.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=155 height=234
src="day11.files/image044.jpg" v:shapes="_x0000_i1047"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>看门狗的数据库如下：</span></p>

<p class=MsoNormal><span lang=EN-US>public class WatchDogOpenHelper extends
SQLiteOpenHelper</span></p>

<p class=MsoNormal><span lang=EN-US>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
static final String DB_NAME = &quot;info&quot;;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
WatchDogOpenHelper(Context context)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>super(context,
&quot;watchdog.db&quot;, null, 1);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
void onCreate(SQLiteDatabase db)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>db.execSQL(&quot;create
table &quot; + DB_NAME + &quot;(_id integer primary key
autoincrement,packagename varchar(50))&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>表中就保存包名这个字段</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>对数据库操作的类如下：</span></p>

<p class=MsoNormal><span lang=EN-US>public class WatchDogDao</span></p>

<p class=MsoNormal><span lang=EN-US>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
WatchDogOpenHelper wdoh;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
byte[] b = new byte[1024];</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>在构造函数中获取</span><span lang=EN-US>WatchDogOpenHelper</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
WatchDogDao(Context context)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>wdoh
= new WatchDogOpenHelper(context);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>增删改查</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>面试</span><span lang=EN-US>:</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>我在同一时刻对数据库既进行读操作也进行写操作</span><span lang=EN-US>,</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>怎么避免这个两个操作同</span><span lang=EN-US><span style='mso-tab-count:1'>      </span>//</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>时操作数据库</span><span lang=EN-US>?</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>同步锁</span><span lang=EN-US>+</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>将</span><span lang=EN-US>WatchDogOpenHelper</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>设置成单例模式</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>添加应用程序包名</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
void addLockApp(String packageName)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
synchronized (b) {//b</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>是一个对象，可任意，</span><span
lang=EN-US>this</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>也行</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
1.</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取数据库</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>SQLiteDatabase
database = wdoh.getWritableDatabase();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
2.</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>添加操作</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
ContentValues :</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>　添加的数据</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>ContentValues
values = new ContentValues();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>values.put(&quot;packagename&quot;,
packageName);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>database.insert(WatchDogOpenHelper.DB_NAME,
null, values);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
3.</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>关闭数据库</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>database.close();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
}</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>查询数据库是否有包名</span><span
lang=EN-US>,</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>有</span><span lang=EN-US>return true ,</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>没有</span><span lang=EN-US>return false</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
boolean queryLockApp(String packagname)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>boolean
isLock = false;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
1.</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取数据库</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>SQLiteDatabase
database = wdoh.getReadableDatabase();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
2.</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>查询数据库</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
table : </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>表名</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
columns : </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>查询的字段</span><span lang=EN-US> mode</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
selection : </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>查询条件</span><span lang=EN-US> where xxxx
= xxxx</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
selectionArgs : </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>查询条件的参数</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
groupBy : </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>分组</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
having : </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>去重</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
orderBy : </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>排序</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>Cursor
cursor = database.query(WatchDogOpenHelper.DB_NAME, null,
&quot;packagename=?&quot;, new String[]</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{
packagname }, null, null, null);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
3.</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>解析</span><span lang=EN-US>cursor</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>if
(cursor.moveToNext())</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取查询出来的数据：只需要查询有无数据即可</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>isLock
= true;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
4.</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>关闭数据库</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>cursor.close();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>database.close();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>return
isLock;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>删除包名</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
void deleteLockApp(String packagename)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
1.</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取数据库</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>SQLiteDatabase
database = wdoh.getWritableDatabase();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
2.</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>删除</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
table : </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>表名</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
whereClause : </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>查询的条件</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
whereArgs : </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>查询条件的参数</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>database.delete(WatchDogOpenHelper.DB_NAME,
&quot;packagename=?&quot;, new String[]</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{
packagename });</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
3.</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>关闭数据库</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>database.close();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>查询全部数据</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
List&lt;String&gt; querLockApp()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>List&lt;String&gt;
list = new ArrayList&lt;String&gt;();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
1.</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取数据库</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>SQLiteDatabase
database = wdoh.getReadableDatabase();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
2.</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>查询操作</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>Cursor
cursor = database.query(WatchDogOpenHelper.DB_NAME, new String[]</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{
&quot;packagename&quot; }, null, null, null, null, null);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
3.</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>解析</span><span lang=EN-US>cursor</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>while
(cursor.moveToNext())</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获取查询出来的数据</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>String
packagename = cursor.getString(0);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>list.add(packagename);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
4.</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>关闭数据库</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>cursor.close();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>database.close();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>return
list;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

</div>

</body>

</html>
