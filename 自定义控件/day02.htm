<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882"
xmlns:m="http://schemas.microsoft.com/office/2004/12/omml"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 12">
<meta name=Originator content="Microsoft Word 12">
<link rel=File-List href="day02.files/filelist.xml">
<link rel=Edit-Time-Data href="day02.files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>WangCongwei</o:Author>
  <o:LastAuthor>Windows 使用者</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>312</o:TotalTime>
  <o:Created>2017-07-11T06:14:00Z</o:Created>
  <o:LastSaved>2017-07-11T06:14:00Z</o:LastSaved>
  <o:Pages>15</o:Pages>
  <o:Words>1880</o:Words>
  <o:Characters>10716</o:Characters>
  <o:Lines>89</o:Lines>
  <o:Paragraphs>25</o:Paragraphs>
  <o:CharactersWithSpaces>12571</o:CharactersWithSpaces>
  <o:Version>12.00</o:Version>
 </o:DocumentProperties>
 <o:CustomDocumentProperties>
  <o:KSOProductBuildVer dt:dt="string">2052-10.1.0.5554</o:KSOProductBuildVer>
 </o:CustomDocumentProperties>
</xml><![endif]-->
<link rel=dataStoreItem href="day02.files/item0001.xml"
target="day02.files/props0002.xml">
<link rel=themeData href="day02.files/themedata.thmx">
<link rel=colorSchemeMapping href="day02.files/colorschememapping.xml">
<!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:TrackMoves>false</w:TrackMoves>
  <w:TrackFormatting/>
  <w:PunctuationKerning/>
  <w:DrawingGridVerticalSpacing>7.8 pt</w:DrawingGridVerticalSpacing>
  <w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery>
  <w:DisplayVerticalDrawingGridEvery>2</w:DisplayVerticalDrawingGridEvery>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotPromoteQF/>
  <w:LidThemeOther>EN-US</w:LidThemeOther>
  <w:LidThemeAsian>ZH-TW</w:LidThemeAsian>
  <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>
  <w:Compatibility>
   <w:SpaceForUL/>
   <w:BalanceSingleByteDoubleByteWidth/>
   <w:DoNotLeaveBackslashAlone/>
   <w:ULTrailSpace/>
   <w:DoNotExpandShiftReturn/>
   <w:AdjustLineHeightInTable/>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:DontUseIndentAsNumberingTabStop/>
   <w:FELineBreak11/>
   <w:WW11IndentRules/>
   <w:DontAutofitConstrainedTables/>
   <w:AutofitLikeWW11/>
   <w:HangulWidthLikeWW11/>
   <w:UseNormalStyleForList/>
   <w:UseFELayout/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
  <m:mathPr>
   <m:mathFont m:val="Cambria Math"/>
   <m:brkBin m:val="before"/>
   <m:brkBinSub m:val="&#45;-"/>
   <m:smallFrac m:val="off"/>
   <m:dispDef/>
   <m:lMargin m:val="0"/>
   <m:rMargin m:val="0"/>
   <m:defJc m:val="centerGroup"/>
   <m:wrapIndent m:val="1440"/>
   <m:intLim m:val="subSup"/>
   <m:naryLim m:val="undOvr"/>
  </m:mathPr></w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="false"
  DefSemiHidden="false" DefQFormat="false" LatentStyleCount="267">
  <w:LsdException Locked="false" QFormat="true" Name="Normal"/>
  <w:LsdException Locked="false" QFormat="true" Name="heading 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 6"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 7"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 8"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 9"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="caption"/>
  <w:LsdException Locked="false" QFormat="true" Name="Title"/>
  <w:LsdException Locked="false" SemiHidden="true" QFormat="true"
   Name="Default Paragraph Font"/>
  <w:LsdException Locked="false" QFormat="true" Name="Subtitle"/>
  <w:LsdException Locked="false" Priority="99" Name="Hyperlink"/>
  <w:LsdException Locked="false" QFormat="true" Name="Strong"/>
  <w:LsdException Locked="false" QFormat="true" Name="Emphasis"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true"
   UnhideWhenUsed="true" Name="HTML Top of Form"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true"
   UnhideWhenUsed="true" Name="HTML Bottom of Form"/>
  <w:LsdException Locked="false" SemiHidden="true" QFormat="true"
   Name="Normal Table"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true"
   UnhideWhenUsed="true" Name="No List"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true"
   UnhideWhenUsed="true" Name="Outline List 1"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true"
   UnhideWhenUsed="true" Name="Outline List 2"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true"
   UnhideWhenUsed="true" Name="Outline List 3"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true"
   UnhideWhenUsed="true" Name="Placeholder Text"/>
  <w:LsdException Locked="false" Priority="99" QFormat="true" Name="No Spacing"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 1"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true"
   UnhideWhenUsed="true" Name="Revision"/>
  <w:LsdException Locked="false" Priority="99" QFormat="true"
   Name="List Paragraph"/>
  <w:LsdException Locked="false" Priority="99" QFormat="true" Name="Quote"/>
  <w:LsdException Locked="false" Priority="99" QFormat="true"
   Name="Intense Quote"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 1"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 1"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 2"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 2"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 2"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 3"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 3"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 3"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 4"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 4"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 4"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 5"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 5"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 5"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 6"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 6"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 6"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="19" QFormat="true"
   Name="Subtle Emphasis"/>
  <w:LsdException Locked="false" Priority="21" QFormat="true"
   Name="Intense Emphasis"/>
  <w:LsdException Locked="false" Priority="31" QFormat="true"
   Name="Subtle Reference"/>
  <w:LsdException Locked="false" Priority="32" QFormat="true"
   Name="Intense Reference"/>
  <w:LsdException Locked="false" Priority="33" QFormat="true" Name="Book Title"/>
  <w:LsdException Locked="false" Priority="37" SemiHidden="true"
   UnhideWhenUsed="true" Name="Bibliography"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="TOC Heading"/>
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-alt:宋体;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 680460288 22 0 262145 0;}
@font-face
	{font-family:新細明體;
	panose-1:2 2 5 0 0 0 0 0 0 0;
	mso-font-alt:PMingLiU;
	mso-font-charset:136;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-1610611969 684719354 22 0 1048577 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-536870145 1107305727 0 0 415 0;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-536870145 1073743103 0 0 415 0;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:-520092929 1073786111 9 0 415 0;}
@font-face
	{font-family:等线;
	mso-font-alt:"Arial Unicode MS";
	mso-font-charset:122;
	mso-generic-font-family:auto;
	mso-font-pitch:auto;
	mso-font-signature:0 953122042 22 0 262159 0;}
@font-face
	{font-family:"\@新細明體";
	panose-1:2 2 5 0 0 0 0 0 0 0;
	mso-font-charset:136;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-1610611969 684719354 22 0 1048577 0;}
@font-face
	{font-family:"\@SimSun";
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 680460288 22 0 262145 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	font-size:10.5pt;
	mso-bidi-font-size:12.0pt;
	font-family:"Calibri","sans-serif";
	mso-fareast-font-family:SimSun;
	mso-bidi-font-family:"Times New Roman";
	mso-font-kerning:1.0pt;
	mso-fareast-language:ZH-CN;}
h1
	{mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-link:"標題 1 字元";
	mso-style-next:內文;
	margin-top:9.0pt;
	margin-right:0cm;
	margin-bottom:9.0pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:300%;
	mso-pagination:none;
	page-break-after:avoid;
	mso-outline-level:1;
	font-size:26.0pt;
	font-family:"Cambria","serif";
	mso-fareast-font-family:新細明體;
	mso-font-kerning:26.0pt;
	mso-fareast-language:ZH-CN;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{mso-style-update:auto;
	mso-style-priority:39;
	mso-style-unhide:no;
	mso-style-next:內文;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	font-size:10.5pt;
	mso-bidi-font-size:12.0pt;
	font-family:"Calibri","sans-serif";
	mso-fareast-font-family:SimSun;
	mso-bidi-font-family:"Times New Roman";
	mso-font-kerning:1.0pt;
	mso-fareast-language:ZH-CN;}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-unhide:no;
	mso-style-link:"頁首 字元";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	tab-stops:center 207.65pt right 415.3pt;
	layout-grid-mode:char;
	font-size:10.0pt;
	font-family:"Calibri","sans-serif";
	mso-fareast-font-family:SimSun;
	mso-bidi-font-family:"Times New Roman";
	mso-font-kerning:1.0pt;
	mso-fareast-language:ZH-CN;}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-unhide:no;
	mso-style-link:"頁尾 字元";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	tab-stops:center 207.65pt right 415.3pt;
	layout-grid-mode:char;
	font-size:10.0pt;
	font-family:"Calibri","sans-serif";
	mso-fareast-font-family:SimSun;
	mso-bidi-font-family:"Times New Roman";
	mso-font-kerning:1.0pt;
	mso-fareast-language:ZH-CN;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	mso-themecolor:hyperlink;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-unhide:no;
	color:purple;
	mso-themecolor:followedhyperlink;
	text-decoration:underline;
	text-underline:single;}
span.a
	{mso-style-name:"頁首 字元";
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:頁首;
	mso-font-kerning:1.0pt;
	mso-fareast-language:ZH-CN;}
span.a0
	{mso-style-name:"頁尾 字元";
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:頁尾;
	mso-font-kerning:1.0pt;
	mso-fareast-language:ZH-CN;}
span.1
	{mso-style-name:"標題 1 字元";
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"標題 1";
	mso-ansi-font-size:26.0pt;
	mso-bidi-font-size:26.0pt;
	font-family:"Cambria","serif";
	mso-ascii-font-family:Cambria;
	mso-fareast-font-family:新細明體;
	mso-hansi-font-family:Cambria;
	mso-font-kerning:26.0pt;
	mso-fareast-language:ZH-CN;
	font-weight:bold;}
.MsoChpDefault
	{mso-style-type:export-only;
	mso-default-props:yes;
	mso-ascii-font-family:Calibri;
	mso-fareast-font-family:SimSun;
	mso-hansi-font-family:Calibri;}
 /* Page Definitions */
 @page
	{mso-page-border-surround-header:no;
	mso-page-border-surround-footer:no;
	mso-footnote-separator:url("day02.files/header.htm") fs;
	mso-footnote-continuation-separator:url("day02.files/header.htm") fcs;
	mso-endnote-separator:url("day02.files/header.htm") es;
	mso-endnote-continuation-separator:url("day02.files/header.htm") ecs;}
@page WordSection1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;
	mso-header-margin:42.55pt;
	mso-footer-margin:49.6pt;
	mso-paper-source:0;
	layout-grid:15.6pt;}
div.WordSection1
	{page:WordSection1;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:表格內文;
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Calibri","sans-serif";
	mso-bidi-font-family:"Times New Roman";}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="3074"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body bgcolor=white lang=ZH-TW link=blue vlink=purple style='tab-interval:21.0pt;
text-justify-trim:punctuation'>

<div class=WordSection1 style='layout-grid:15.6pt'>

<p class=MsoNormal><span lang=EN-US style='font-size:20.0pt;mso-bidi-font-size:
24.0pt;font-family:等线;mso-bidi-font-family:等线'>day02<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoToc1 style='tab-stops:right dotted 414.8pt'><!--[if supportFields]><span
lang=EN-US><span style='mso-element:field-begin'></span><span
style='mso-spacerun:yes'> </span>TOC \o &quot;1-3&quot; \h \z \u <span
style='mso-element:field-separator'></span></span><![endif]--><span lang=EN-US><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc487545766"><span
lang=ZH-CN style='font-family:等线;mso-bidi-font-family:等线'>第一集</span><span
style='font-family:等线;mso-bidi-font-family:等线'><span style='mso-spacerun:yes'> 
</span></span><span lang=ZH-CN style='font-family:等线;mso-bidi-font-family:等线'>下拉刷新</span><span
style='font-family:等线;mso-bidi-font-family:等线'>ListView</span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>.. </span></span><!--[if supportFields]><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-element:field-begin'></span></span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'> PAGEREF _Toc487545766 \h </span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-separator'></span></span><![endif]--><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'>1</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003400380037003500340035003700360036000000</w:data>
</xml><![endif]--></span><!--[if supportFields]><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-end'></span></span><![endif]--></a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></span></p>

<p class=MsoNormal><!--[if supportFields]><span lang=EN-US><span
style='mso-element:field-end'></span></span><![endif]--><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h1><a name="_Toc487545766"><span lang=ZH-CN style='font-size:14.0pt;
mso-bidi-font-size:18.0pt;line-height:300%;font-family:等线;mso-bidi-font-family:
等线;mso-font-kerning:1.0pt'>第一集</span></a><span style='mso-bookmark:_Toc487545766'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:18.0pt;line-height:300%;
font-family:等线;mso-bidi-font-family:等线;mso-font-kerning:1.0pt'><span
style='mso-spacerun:yes'>  </span></span></span><span style='mso-bookmark:_Toc487545766'><span
lang=ZH-CN style='font-size:14.0pt;mso-bidi-font-size:18.0pt;line-height:300%;
font-family:等线;mso-bidi-font-family:等线;mso-font-kerning:1.0pt'>下拉刷新</span></span><span
style='mso-bookmark:_Toc487545766'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:18.0pt;line-height:300%;font-family:等线;mso-bidi-font-family:
等线;mso-font-kerning:1.0pt'>ListView</span></span><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:18.0pt;line-height:300%;font-family:
等线;mso-bidi-font-family:等线;mso-font-kerning:1.0pt'><o:p></o:p></span></h1>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>自定义的</span><span lang=EN-US>RefreshListView</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>如下：</span></p>

<p class=MsoNormal><span lang=EN-US>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'> </span>* </span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>包含下拉刷新上拉加载功能的</span><span lang=EN-US>ListView</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US>public class RefreshListView extends
ListView</span></p>

<p class=MsoNormal><span lang=EN-US>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
float downY; // </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>手指在</span><span lang=EN-US>ListView</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>上按下的</span><span lang=EN-US>y</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>坐标</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
float moveY; // </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>手指按下后</span><span lang=EN-US>ListView</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>移动的</span><span lang=EN-US>y</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>坐标</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
static final int PULL_TO_REFRESH = 0;// </span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>下拉状态</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
static final int RELEASE_REFRESH = 1;// </span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>释放状态</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
static final int REFRESHING = 2; // </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>刷新中状态</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
int currentState = PULL_TO_REFRESH; // </span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>当前刷新的模式</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
RotateAnimation rotateUpAnim; // </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>箭头向上动画</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
RotateAnimation rotateDownAnim; // </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>箭头向下动画</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
View mHeaderView; // </span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>头布局</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
int mHeaderViewHeight; // </span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>头布局的高度</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
View mArrowView; // </span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>头布局中的箭头布局</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
ProgressBar pb; // </span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>头布局中的圆形进度条</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
TextView mTitleText; // </span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>头布局中的标题</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
TextView mLastRefreshTime; // </span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>头布局中的最后刷新时间</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
View mFooterView; // </span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>脚布局</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
int mFooterViewHeight; // </span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>脚布局的高度</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
boolean isLoadingMore; // </span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>判断脚布局是否正在加载更多</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
OnRefreshListener mListener; // </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>刷新监听器</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>带一个参数的构造函数</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
RefreshListView(Context context)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>super(context);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>init();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>带两个参数的构造函数</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
RefreshListView(Context context, AttributeSet attrs)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>super(context,
attrs);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>init();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>带三个参数的构造函数</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
RefreshListView(Context context, AttributeSet attrs, int defStyle)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>super(context,
attrs, defStyle);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>init();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>初始化头布局，脚布局和滚动监听</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
void init()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>initHeaderView();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>initHeadViewAnimation();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>initFooterView();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>设置</span><span
lang=EN-US>ListView</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>滚动监听</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>setOnScrollListener(new
OnScrollListener()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
SCROLL_STATE_IDLE</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>：没有滚动状态</span></p>

<p class=MsoNormal style='margin-left:63.0pt'><span lang=EN-US>//
SCROLL_STATE_TOUCH_SCROLL</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>：当用户在以触屏方式滚动屏幕并且手指仍然</span><span
lang=EN-US>//</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>还在屏幕上时</span></p>

<p class=MsoNormal style='margin-left:63.0pt'><span lang=EN-US>//
SCROLL_STATE_FLING</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>：当用户由于之前划动屏幕并抬起手指，屏幕产生惯性</span><span
lang=EN-US>//</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>滑动时</span></p>

<p class=MsoNormal style='margin-left:63.0pt'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:63.0pt'><span lang=EN-US>//</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>状态更新的时候调用</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>public
void onScrollStateChanged(AbsListView view, int scrollState)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>if
(isLoadingMore)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span><span
style='mso-tab-count:2'>                   </span>return; // </span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>已经在加载更多</span><span lang=EN-US>.</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>返回</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt'><span lang=EN-US>// </span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>如果最新状态是空闲状态</span><span lang=EN-US>, </span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>并且当前界面显示了所有数据的最后一条，</span><span lang=EN-US>//</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>就执行加载更多操作</span></p>

<p class=MsoNormal style='margin-left:84.0pt'><span lang=EN-US>if (scrollState
== SCROLL_STATE_IDLE &amp;&amp; getLastVisiblePosition() &gt;= (getCount() -
1))</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>isLoadingMore
= true;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>mFooterView.setPadding(0,
0, 0, 0);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>if
(mListener != null)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>mListener.onLoadMore();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>public
void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int
totalItemCount)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>滑动过程</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>});</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>初始化头布局</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
void initHeaderView()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>mHeaderView
= View.inflate(getContext(), R.layout.layout_header_list, null);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
layout_header_list</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>如下</span><span lang=EN-US>:</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><!--[if gte vml 1]><v:shapetype id="_x0000_t75" coordsize="21600,21600"
 o:spt="75" o:preferrelative="t" path="m@4@5l@4@11@9@11@9@5xe" filled="f"
 stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="图片_x0020_1" o:spid="_x0000_i1025" type="#_x0000_t75"
 alt="" style='width:192.75pt;height:47.25pt'>
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="day02.files/image001.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=257 height=63
src="day02.files/image002.jpg" v:shapes="图片_x0020_1"><![endif]></span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US>//</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>其中向下的箭头部分代码如下：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><span style='mso-spacerun:yes'> </span>&lt;FrameLayout</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><span style='mso-spacerun:yes'>       
</span>android:layout_margin=&quot;5dp&quot;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><span style='mso-spacerun:yes'>       
</span>android:layout_width=&quot;50dp&quot;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><span style='mso-spacerun:yes'>        </span>android:layout_height=&quot;50dp&quot;
&gt;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><span style='mso-spacerun:yes'>        </span>&lt;ImageView</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><span style='mso-spacerun:yes'>           
</span>android:id=&quot;@+id/iv_arrow&quot;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><span style='mso-spacerun:yes'>           
</span>android:layout_width=&quot;wrap_content&quot;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><span style='mso-spacerun:yes'>           
</span>android:layout_height=&quot;wrap_content&quot;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><span style='mso-spacerun:yes'>           
</span>android:layout_gravity=&quot;center&quot;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><span style='mso-spacerun:yes'>           
</span>android:src=&quot;@drawable/common_listview_headview_red_arrow&quot;
/&gt;</span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US>//</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>资源文件今天的资料中有</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><span style='mso-spacerun:yes'>        </span>&lt;ProgressBar</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><span style='mso-spacerun:yes'>           
</span>android:id=&quot;@+id/pb&quot;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><span style='mso-spacerun:yes'>           
</span>android:layout_width=&quot;match_parent&quot;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><span style='mso-spacerun:yes'>           
</span>android:layout_height=&quot;match_parent&quot;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><span style='mso-spacerun:yes'>            </span></span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><span style='mso-spacerun:yes'>           
</span>android:visibility=&quot;invisible&quot;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><span style='mso-spacerun:yes'>            </span>//
visibility=&quot;invisible&quot;</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>：设置进度条暂时不显示且不占用地方，代码中</span><span
lang=EN-US><span style='mso-tab-count:4'>                             </span>//</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>再设置其可显示</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><span style='mso-spacerun:yes'>           
</span>android:indeterminateDrawable=&quot;@drawable/shape_progress&quot;/&gt;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><span style='mso-spacerun:yes'>        </span><span
style='mso-tab-count:1'>         </span>//shape_progress.xml</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>如下：</span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'>&lt;!--<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'>&lt;rotate
xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'><span style='mso-spacerun:yes'>    </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:105.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'>android:fromDegrees=&quot;0&quot;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:105.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'>//</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>从</span><span
lang=EN-US style='color:blue'>0</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>度</span><span
lang=EN-US style='color:blue'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'><span style='mso-spacerun:yes'>    </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:105.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'>android:toDegrees=&quot;-360&quot;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:105.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'>//toDegrees:</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri;color:blue'>到</span><span lang=EN-US style='color:blue'>360</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri;color:blue'>度</span><span lang=EN-US style='color:blue'>(</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri;color:blue'>正为顺时针</span><span lang=EN-US style='color:blue'>,</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri;color:blue'>负为逆时针</span><span lang=EN-US style='color:blue'>)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'><span style='mso-spacerun:yes'>    </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:105.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'>android:pivotX=&quot;50%&quot;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'><span style='mso-spacerun:yes'>   
</span>android:pivotY=&quot;50%&quot;&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:105.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'>//pivotX</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>和</span><span
lang=EN-US style='color:blue'>pivotY:</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>以中心点为坐标进行旋转</span><span
lang=EN-US style='color:blue'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:105.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'><span style='mso-spacerun:yes'>   
</span>&lt;shape<span style='mso-spacerun:yes'>        </span><span
style='mso-tab-count:4'>                                 </span><span
style='mso-spacerun:yes'> </span><span style='mso-tab-count:2'>                </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:105.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'>xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'><span style='mso-spacerun:yes'>       
</span>android:innerRadiusRatio=&quot;2.5&quot;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:126.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'>//</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>圆环内半径比</span><span
lang=EN-US style='color:blue'>:</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>圆环所在的控件的边长与圆环内半径之比</span><span
lang=EN-US style='color:blue'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'><span style='mso-spacerun:yes'>       
</span>android:thicknessRatio=&quot;10&quot;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:126.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'>//</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>圆环厚度比</span><span
lang=EN-US style='color:blue'>:</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>圆环所在的控件的边长与圆环厚度之比</span><span
lang=EN-US style='color:blue'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'><span style='mso-spacerun:yes'>       
</span>android:shape=&quot;ring&quot;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:126.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'>//shape=&quot;ring&quot;:</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri;color:blue'>设置为圆形</span><span lang=EN-US style='color:blue'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:126.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'><span style='mso-spacerun:yes'>       
</span>android:useLevel=&quot;false&quot; &gt;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'><span style='mso-spacerun:yes'>       
</span>//useLevel:</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri;color:blue'>禁止圆环从头到尾逐渐显示</span><span
lang=EN-US style='color:blue'>,</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>而是一次性显示完</span><span
lang=EN-US style='color:blue'><span style='mso-tab-count:3'>                        </span>//</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri;color:blue'>整的圆环</span><span lang=EN-US style='color:blue'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'><span style='mso-spacerun:yes'>        </span><span
style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'>             </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'><span style='mso-spacerun:yes'>       
</span>&lt;gradient<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'><span style='mso-spacerun:yes'>           
</span>android:startColor=&quot;#FF0000&quot;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'><span style='mso-spacerun:yes'>           
</span>android:centerColor=&quot;#44FF0000&quot; <o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'><span style='mso-spacerun:yes'>           
</span>android:endColor=&quot;#00000000&quot;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:147.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'>//</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>设置圆环开始为红色</span><span
lang=EN-US style='color:blue'>,</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>中间为透明红色</span><span
lang=EN-US style='color:blue'>,</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>尾部为白色</span><span
lang=EN-US style='color:blue'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'><span style='mso-spacerun:yes'>           
</span>android:type=&quot;sweep&quot; /&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:147.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'>//sweep:</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>设置为扫描状</span><span
lang=EN-US style='color:blue'>,</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:blue'>即圆环形状</span><span
lang=EN-US style='color:blue'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'><span style='mso-spacerun:yes'>           </span><span
style='mso-tab-count:2'>            </span><span
style='mso-spacerun:yes'> </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'><span style='mso-spacerun:yes'>   
</span>&lt;/shape&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'>&lt;/rotate&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:84.0pt;text-indent:21.0pt'><span
lang=EN-US style='color:blue'>--&gt;<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><span style='mso-spacerun:yes'>    </span>&lt;/FrameLayout&gt;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>mArrowView
= mHeaderView.findViewById(R.id.iv_arrow);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>pb
= (ProgressBar) mHeaderView.findViewById(R.id.pb);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>mTitleText
= (TextView) mHeaderView.findViewById(R.id.tv_title);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>mLastRefreshTime
= (TextView) mHeaderView.findViewById(R.id.tv_desc_last_refresh);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>提前手动测量头布局的宽高。</span><span lang=ZH-CN> </span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>只有先测量才能调用</span><span lang=EN-US>getMeasuredHeight()</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>，否则</span><span lang=EN-US><span style='mso-tab-count:2'>           </span>//</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>无法获得</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>参数表示按照原有的规则进行测量，比较复杂，无需进一步掌握</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>mHeaderView.measure(0,
0);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>mHeaderViewHeight
= mHeaderView.getMeasuredHeight();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>设置内边距</span><span lang=EN-US>, </span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>负值表示减少内边距，</span><span lang=EN-US>padding</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>属性的值是可以设置为负数的</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
-mHeaderViewHeight</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>表示隐藏头布局。具体原因见下图：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><!--[if gte vml 1]><v:shape id="图片_x0020_4" o:spid="_x0000_i1026"
 type="#_x0000_t75" alt="" style='width:244.5pt;height:215.25pt'>
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="day02.files/image003.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=326 height=287
src="day02.files/image004.jpg" v:shapes="图片_x0020_4"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>四个参数分别表示</span><span lang=EN-US>left,top,right,bottom</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>的</span><span lang=EN-US>padding</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>值</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>mHeaderView.setPadding(0,
-mHeaderViewHeight, 0, 0);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>一定要在</span><span lang=EN-US>ListView</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>设置数据适配器之前添加头布局</span><span lang=EN-US>/</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>脚布局</span><span lang=EN-US>,</span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>否则会报错</span><span
lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>addHeaderView(mHeaderView);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>初始化脚布局</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
void initFooterView()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>mFooterView
= View.inflate(getContext(), R.layout.layout_footer_list, null);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
layout_footer_list.xml</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>如下：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><!--[if gte vml 1]><v:shape id="图片_x0020_2" o:spid="_x0000_i1027"
 type="#_x0000_t75" alt="" style='width:168.75pt;height:33pt'>
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="day02.files/image005.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=225 height=44
src="day02.files/image006.jpg" v:shapes="图片_x0020_2"><![endif]></span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US>//</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>左边是一个头布局中定义的圆环进度条（由于</span><span
lang=EN-US>Eclipse</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>预览的原因，本来应该是圆</span><span lang=EN-US><span
style='mso-tab-count:1'>          </span>//</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>环的，预览中显示为扇形了。但</span><span lang=EN-US>AVD</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>和手机中显示为正常环形），右边是一个文</span><span lang=EN-US><span style='mso-tab-count:
1'>  </span>//</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>本框</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>mFooterView.measure(0,
0);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>mFooterViewHeight
= mFooterView.getMeasuredHeight();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>隐藏脚布局</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>mFooterView.setPadding(0,
-mFooterViewHeight, 0, 0);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>addFooterView(mFooterView);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>初始化头布局的动画</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
void initHeadViewAnimation()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal style='margin-left:42.0pt'><span lang=EN-US>// </span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>箭头向上转</span><span lang=EN-US>, </span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>围绕着自己的中心</span><span lang=EN-US>, </span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>逆时针旋转</span><span lang=EN-US>0 -&gt; -180</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>（从向上逆时针转到向</span></p>

<p class=MsoNormal style='margin-left:42.0pt'><span lang=EN-US>//</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>下）</span><span lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>rotateUpAnim
= new RotateAnimation(0f, -180f, Animation.RELATIVE_TO_SELF, 0.5f,
Animation.RELATIVE_TO_SELF,</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>0.5f);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>rotateUpAnim.setDuration(300);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>rotateUpAnim.setFillAfter(true);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>动画停留在结束位置</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>箭头向下转</span><span lang=EN-US>, </span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>围绕着自己的中心</span><span lang=EN-US>, </span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>逆时针旋转</span><span lang=EN-US> -180 -&gt; -360</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>（从向下再逆时针转到向上）</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>rotateDownAnim
= new RotateAnimation(-180f, -360, Animation.RELATIVE_TO_SELF, 0.5f,
Animation.RELATIVE_TO_SELF,</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>0.5f);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>rotateDownAnim.setDuration(300);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>rotateDownAnim.setFillAfter(true);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>动画停留在结束位置</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>设置</span><span
lang=EN-US>ListView</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>的触摸事件</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
boolean onTouchEvent(MotionEvent ev)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>触摸时根据</span><span lang=EN-US>paddingTop</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>动态修改头布局</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
paddingTop &gt; 0 </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>顶部空白。</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
paddingTop = 0 </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>完全显示。</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
paddingTop &lt;0 </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>不完全显示。</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US>// paddingTop =-</span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>头布局自身的高度</span><span
lang=ZH-CN> </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>则完全隐藏</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>判断滑动的距离</span><span lang=EN-US>, </span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>给</span><span lang=EN-US>Header</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>设置</span><span lang=EN-US>paddingTop</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>值</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>switch
(ev.getAction())</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>case
MotionEvent.ACTION_DOWN:</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>downY
= ev.getY();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获得手指按下的坐标</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>break;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>case
MotionEvent.ACTION_MOVE:</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>moveY
= ev.getY();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>获得手指按下后</span><span lang=EN-US>ListView</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>向下移动的坐标</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>如果是正在刷新中</span><span lang=EN-US>, </span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>就执行父类的处理。防止手指多次按下滑动</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>if
(currentState == REFRESHING)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>return
super.onTouchEvent(ev);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>float
offset = moveY - downY;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>手指按下后</span><span lang=EN-US>ListView</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>上下移动的位移差（偏移量）</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>只有偏移量</span><span lang=EN-US>&gt;0, </span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>并且当前第一个可见条目索引是</span><span lang=EN-US>0, </span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>才显示头部</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>if
(offset &gt; 0 &amp;&amp; getFirstVisiblePosition() == 0)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
int paddingTop = -</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>自身高度（此时头布局已隐藏）</span><span lang=EN-US> +
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>偏移量</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>int
paddingTop = (int) (-mHeaderViewHeight + offset);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>mHeaderView.setPadding(0,
paddingTop, 0, 0);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>头布局显示与否都通过设置</span><span lang=EN-US>padding</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>值来进行</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>if
(paddingTop &gt;= 0 &amp;&amp; currentState != RELEASE_REFRESH)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>{//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>此时头布局完全显示</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>切换成释放刷新模式</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>currentState
= RELEASE_REFRESH;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>updateHeader();
// </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>根据最新的状态值更新头布局内容</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>}
else if (paddingTop &lt; 0 &amp;&amp; currentState != PULL_TO_REFRESH)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>{
// </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>头布局不完全显示</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>切换成下拉刷新模式</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>currentState
= PULL_TO_REFRESH;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>updateHeader();
// </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>根据最新的状态值更新头布局内容</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>return
true; // </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>当前事件被我们处理并消费</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>break;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>case
MotionEvent.ACTION_UP:</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>松手之后根据当前的</span><span lang=EN-US>paddingTop</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>决定是否执行刷新</span></p>

<p class=MsoNormal style='margin-left:42.0pt'><span lang=EN-US><span
style='mso-tab-count:1'>         </span>// paddingTop &lt; 0 </span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>不完全显示</span><span lang=EN-US>, </span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>恢复（此种情况用于用户下拉后又后悔，让头</span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:21.0pt'><span
lang=EN-US>//</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>布局回到隐藏状态的情况）</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
paddingTop &gt;= 0 </span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>完全显示</span><span
lang=EN-US>, </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>执行正在刷新</span><span lang=EN-US>...</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>if
(currentState == PULL_TO_REFRESH)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
paddingTop &lt; 0 </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>不完全显示</span><span lang=EN-US>, </span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>回到隐藏状态</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>mHeaderView.setPadding(0,
-mHeaderViewHeight, 0, 0);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>}
else if (currentState == RELEASE_REFRESH)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
paddingTop &gt;= 0 </span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>完全显示</span><span
lang=EN-US>, </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>执行正在刷新</span><span lang=EN-US>...</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>mHeaderView.setPadding(0,
0, 0, 0);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>currentState
= REFRESHING;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>updateHeader();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>break;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>default:</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>break;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>return
super.onTouchEvent(ev);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>触摸事件方法的</span><span lang=EN-US>super</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>千万不要删除</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>根据状态值更新头布局中显示的内容</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
void updateHeader()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>switch
(currentState)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>case
PULL_TO_REFRESH: // </span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>切换回下拉状态</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>两件事：做动画</span><span lang=EN-US>, </span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>改标题</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>mArrowView.startAnimation(rotateDownAnim);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>mTitleText.setText(&quot;</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>下拉刷新</span><span lang=EN-US>&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>break;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>case
RELEASE_REFRESH: // </span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>切换成释放状态</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>两件事：做动画</span><span lang=EN-US>, </span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>改标题</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>mArrowView.startAnimation(rotateUpAnim);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>mTitleText.setText(&quot;</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>释放刷新</span><span lang=EN-US>&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>break;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>case
REFRESHING: // </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>刷新中</span><span lang=EN-US>...</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>隐藏箭头及其动画</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-tab-count:2'>                   </span>mArrowView.clearAnimation();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>mArrowView.setVisibility(View.INVISIBLE);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>显示圆形进度条</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>pb.setVisibility(View.VISIBLE);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>mTitleText.setText(&quot;</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>正在刷新中</span><span lang=EN-US>...&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>if
(mListener != null)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>mListener.onRefresh();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>通知调用者（此处指</span><span lang=EN-US>MainActivity</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>）</span><span lang=EN-US>, </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>让其到网络加载更多数据</span><span
lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>break;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>default:</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>break;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>刷新结束</span><span
lang=EN-US>, </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>恢复界面效果</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
void onRefreshComplete()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>if
(isLoadingMore)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>加载更多恢复界面效果</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>mFooterView.setPadding(0,
-mFooterViewHeight, 0, 0);</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>                                        </span><span
style='mso-spacerun:yes'>                                                                                                                                                                                                                                                                </span><span
style='mso-spacerun:yes'>                                                                                                                                                                                                                                                                </span><span
style='mso-spacerun:yes'>                                                                                                                                                                                                                                                                </span><span
style='mso-spacerun:yes'>                                   </span></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>isLoadingMore
= false;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}
else</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>下拉刷新恢复界面效果</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>currentState
= PULL_TO_REFRESH;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>mTitleText.setText(&quot;</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>下拉刷新</span><span lang=EN-US>&quot;); // </span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>切换文本</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>mHeaderView.setPadding(0,
-mHeaderViewHeight, 0, 0);// </span><span lang=ZH-CN style='font-family:SimSun;
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>隐藏头布局</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>pb.setVisibility(View.INVISIBLE);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>mArrowView.setVisibility(View.VISIBLE);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>String
time = getTime();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>mLastRefreshTime.setText(&quot;</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>最后刷新时间</span><span lang=EN-US>: &quot; + time);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>获取最后刷新时间</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
String getTime()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>long
currentTimeMillis = System.currentTimeMillis();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>SimpleDateFormat
sdf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>return
sdf.format(currentTimeMillis);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>/**</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>* </span><span lang=ZH-CN style='font-family:
SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri'>下拉刷新和上拉加载的接口</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'> </span>*/</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
interface OnRefreshListener</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>void
onRefresh(); // </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>下拉刷新</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>void
onLoadMore();// </span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>加载更多</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>public
void setOnRefreshListener(OnRefreshListener mListener)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>this.mListener
= mListener;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>调用的</span><span lang=EN-US>MainActivity</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>如下：</span></p>

<p class=MsoNormal><span lang=EN-US>public class MainActivity extends Activity</span></p>

<p class=MsoNormal><span lang=EN-US>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
RefreshListView listview;// View</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
ArrayList&lt;String&gt; listDatas;// Model</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>private
MyAdapter adapter;// Control</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>protected
void onCreate(Bundle savedInstanceState)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>super.onCreate(savedInstanceState);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>requestWindowFeature(Window.FEATURE_NO_TITLE);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>setContentView(R.layout.activity_main);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>listview
= (RefreshListView) findViewById(R.id.listview);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>listview.setOnRefreshListener(new
OnRefreshListener()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>下拉刷新</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>public
void onRefresh()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>new
Thread()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>public
void run()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>SystemClock.sleep(300);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>listDatas.add(0,
&quot;</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:
Calibri;mso-hansi-font-family:Calibri'>我是下拉刷新出来的数据</span><span lang=EN-US>!&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>runOnUiThread(new
Runnable()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:7'>                                                                 </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:7'>                                                                 </span>public
void run()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:7'>                                                                 </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:8'>                                                                           </span>adapter.notifyDataSetChanged();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:8'>                                                                           </span>listview.onRefreshComplete();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:7'>                                                                 </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>});</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>};</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>}.start();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>上拉加载更多</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>public
void onLoadMore()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>new
Thread()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>public
void run()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>SystemClock.sleep(300);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>listDatas.add(&quot;</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>我是加载更多出来的数据</span><span lang=EN-US>!&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>runOnUiThread(new
Runnable()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:7'>                                                                 </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:7'>                                                                 </span>public
void run()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:7'>                                                                 </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span><span
style='mso-tab-count:4'>                                     </span>adapter.notifyDataSetChanged();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:8'>                                                                           </span>listview.onRefreshComplete();</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:7'>                                                                 </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>                                                        </span>});</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:5'>                                               </span>};</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>                                     </span>}.start();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>});</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>创建一些数据</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>listDatas
= new ArrayList&lt;String&gt;();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>for
(int i = 0; i &lt; 30; i++)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>listDatas.add(&quot;</span><span
lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>这是一条</span><span lang=EN-US>ListView</span><span lang=ZH-CN
style='font-family:SimSun;mso-ascii-font-family:Calibri;mso-hansi-font-family:
Calibri'>数据</span><span lang=EN-US>: &quot; + i);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>//
</span><span lang=ZH-CN style='font-family:SimSun;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri'>设置数据适配器</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>adapter
= new MyAdapter();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>listview.setAdapter(adapter);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>class
MyAdapter extends BaseAdapter</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>public
int getCount()</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>return
listDatas.size();</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>public
Object getItem(int position)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>return
listDatas.get(position);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>public
long getItemId(int position)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>return
position;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>@Override</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>public
View getView(int position, View convertView, ViewGroup parent)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>TextView
textView = new TextView(parent.getContext());</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>textView.setTextSize(18f);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>textView.setText(listDatas.get(position));</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:3'>                            </span>return
textView;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:2'>                   </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>         </span>}</span></p>

<p class=MsoNormal><span lang=EN-US>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

</div>

</body>

</html>
